---
title: Deploy and manage environments
---

# Deploy and manage environments 

Hitachi Cloud Accelerator Platform - Deploy (Deploy Accelerator) is a deployment automation platform that is used to deploy and configure environments reliably and consistently. This topic describes how to create, deploy, and manage environments in Deploy Accelerator.

## <a id="Content" name="Content"></a>Contents
Overview
* <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'overview-env'})" style="text-decoration:none">Overview of environments</a>
* <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'layered-env'})" style="text-decoration:none">Overview of layered environments</a>
* <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'overview-blueprints'})" style="text-decoration:none">Overview of blueprints</a>
* <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'endtoend-overview'})" style="text-decoration:none">End-to-end process for multiple deployments of an environment</a>

Create environments
* <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'provider'})" style="text-decoration:none">Configuring providers</a>
* <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'connection'})" style="text-decoration:none">Configuring connections</a>
* <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'environments'})" style="text-decoration:none">Creating environments</a>
* <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'create-layered-env'})" style="text-decoration:none">Creating layered environments</a>
* <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'blueprint'})" style="text-decoration:none">Creating new environments from blueprints</a>
* <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'copy'})" style="text-decoration:none">Copying environments</a>

Deploy environments
* <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'deploy'})" style="text-decoration:none">Starting new deployments</a>
* <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'view-deploy'})" style="text-decoration:none">Viewing deployments</a>
* <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'plan'})" style="text-decoration:none">Viewing the plan for deployments</a>
* <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'redeploy'})" style="text-decoration:none">Redeploying existing deployments</a>
* <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'deploy-share'})" style="text-decoration:none">Sharing deployments</a>
* <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'destroy'})" style="text-decoration:none">Destroying deployments</a>

Release environments

- <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'version-release'})" style="text-decoration:none">Releasing environment versions</a>
- <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'env-version'})" style="text-decoration:none">Creating new environment versions</a>

Manage environments

* <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'provider-version'})" style="text-decoration:none">Upgrading the provider version of environments</a>
* <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'blueprintview'})" style="text-decoration:none">Viewing dependency between environments</a>
* <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'tags'})" style="text-decoration:none">Configuring custom tags</a>
* <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'compare'})" style="text-decoration:none">Comparing differences between environments</a>
* <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'env-search'})" style="text-decoration:none">Searching environments</a>
* <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'env-rename'})" style="text-decoration:none">Renaming environments</a>
* <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'collaboration'})" style="text-decoration:none">Sharing environments</a>
* <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'delete'})" style="text-decoration:none">Deleting environments</a>
* <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'restore'})" style="text-decoration:none">Restoring deleted environments</a>
* <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'access-env'})" style="text-decoration:none">Accessing environments and deployments of other users</a>

Create and manage blueprints

- <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'export-blueprint'})" style="text-decoration:none">Exporting environments as blueprints</a>
- <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'bp-tips'})" style="text-decoration:none">Best practices for creating blueprints</a>
- <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'bp-gallery'})" style="text-decoration:none">Adding blueprints in the Blueprint Gallery</a>

Manage resources

- <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'rd-resources'})" style="text-decoration:none">Deploy Accelerator resources</a>
- <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'resource-copy'})" style="text-decoration:none">Copying resources</a>
- <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'resource-rename'})" style="text-decoration:none">Renaming resources</a>

Manage packages

- <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'user-package'})" style="text-decoration:none">Adding user-defined packages</a>
- <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'package-work'})" style="text-decoration:none">Managing user-defined packages</a>
- <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'create-package-version'})" style="text-decoration:none">Creating new package versions</a>

Perform post-upgrade tasks

- <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'manual'})" style="text-decoration:none">Manual changes required for migration of blueprints from 2.28.0 to 3.0.2</a>

_**Note:**_

_To access Deploy Accelerator, you must <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-platform-common', viewPage: 'createAndAccessAccount', viewSection: 'logon'})" style="text-decoration:none">sign in to Hitachi Cloud Accelerator Platform</a> by using your Cloud Accelerator Platform account. You can access Deploy Accelerator and perform various actions only if your Cloud Accelerator Platform administrator has granted you the appropriate permissions._

_For information about creating a Cloud Accelerator Platform account, see <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-platform-common', viewPage: 'createAndAccessAccount', viewSection: 'create'})" style="text-decoration:none">Create & access account</a>._

## <a id="overview-env" name="overview-env"></a>Overview of environments

Environments in Deploy Accelerator help you to design the infrastructure that you need to deploy different applications in the cloud. Environments are visual representations of your infrastructure and can be easily created by dragging resources and packages to a canvas. You can also add dependencies between the various resources in an environment.<br>

The following image shows an example of an environment in Deploy Accelerator:

![](/images/rean-deploy/env_sample.PNG)

Each environment contains the following elements:

- **Resources:** Entities that you require to set up the infrastructure, such as an instance, Internet gateway, VPN connection, and Security group. 
- **Packages:** Entities that use open-source infrastructure automation tools to configure compute resources in an environment. Deploy Accelerator provides multiple out-of-the-box packages. If required, you can also create your own user-defined packages by using [Chef](https://docs.chef.io/) (Chef Solo or Chef Server) or [Puppet](https://docs.puppet.com/).
- **Links:** Visual representation of dependencies between various resources in an environment.
- **Scripts:** Set of specific actions that must be performed before or after deploying and destroying an environment.

### <a id="env-ver-dep" name="env-ver-dep"></a>Environment versions and multiple deployments

You can release and version environments in Deploy Accelerator. Releasing an environment enables you to freeze any updates to the environment. Typically, when an environment is ready to be deployed in production, you can release that environment. To add or update resources in a released environment, you must create a new environment version. Environment versions enable you to keep a track of changes to an environment over time.<br>

After you have designed the infrastructure in an environment version, you can start a deployment to actually create the infrastructure. Based on your requirements, you can also start multiple deployments of the same environment version. Multiple deployments help you to create an environment once and then reuse it to create new infrastructures. For example, you can start QA and Production deployments of an environment version or you can start two Production deployments of that environment version. For each new deployment of an environment version, you can define different values for the input variables  (or parameters) that are defined in the environment. For example, you can select different instance types (such as t2. micro or t2.large) for the AWS EC2 instances in your QA and Production deployments. For more information, see <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'endtoend-overview'})" style="text-decoration:none">end-to-end process for multiple deployments of an environment</a>.<br>

![](/images/rean-deploy/rd_envoverview.PNG)

You can also redeploy an existing deployment with the same environment version or with another environment version. Deployments that you no longer need can easily be destroyed.<br>

Environments that you no longer need can also be deleted. If an environment has multiple versions, each version must be separately deleted.  However, before you can delete an environment version, you must destroy all deployments for that version.

## <a id="layered-env" name="layered-env"></a>Overview of layered environments

A layered environment is basically a collection of multiple interdependent <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'overview-env'})" style="text-decoration:none">environments</a>. For example, instead of adding network, database, and application resources in the same environment, you can create separate environments for each set of resources and then create a dependency between them, as shown in the following image.

![](/images/rean-deploy/env_layered.PNG)

While deploying a child environment in a layered environment, you have to select a specific deployment of the parent environment. If parent environments have multiple deployments, you have to select a specific deployment while deploying the child environment. If you do not specify any deployment, the parent deployment with the name **default** is used to deploy the child environment. 

![](/images/rean-deploy/rd_layeredenvoverview.PNG)

The implementation of layered environments allows you to easily update, deploy, and destroy a set of resources (or a layer) without affecting resources in other dependent environments (or layers). Therefore, it is recommended that you create layered environments, instead of standalone environments, to deploy applications.

## <a id="overview-blueprints" name="overview-blueprints"></a>Overview of blueprints

Blueprints in Deploy Accelerator are templates of commonly used IT infrastructures. If you have designed modular solutions (layered environments) or simple solutions (standalone environments) that need to be replicated multiple times, you can <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'export-blueprint'})" style="text-decoration:none">export the environments as blueprints</a>.<br>

If only you plan to create environments from your blueprints, you can maintain the blueprints on your computer. However, if you want other users to create environments from your blueprints, you can <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'bp-gallery'})" style="text-decoration:none">add the blueprints in the Blueprint Gallery</a>. <br>

Users can leverage blueprints to quickly create infrastructure for solutions. For more information, see <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'blueprint'})" style="text-decoration:none">Creating new environments from blueprints</a>.<br>

For example, you can create an environment for a high-availability deployment of Chef Server and export that environment as a blueprint. If another team needs to deploy its own high-availability Chef Server, a user in that team can import your blueprint, customize the deployment parameters, and start a new deployment.<br>

The following image describes the end-to-end lifecycle of a blueprint, from creating and exporting an environment as a blueprint to creating new environments from that blueprint.

![](/images/rean-deploy/blueprintlifecycle.PNG)

## <a id="endtoend-overview" name="endtoend-overview"></a>End-to-end process for multiple deployments of an environment

The following procedure describes the end-to-end process that you can follow to implement multiple deployments of a standalone environment.

1. <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'environments'})" style="text-decoration:none">Create a new environment</a> and design your infrastructure.

   For example, create an environment with the version 01.00.00.

2. <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'deploy'})" style="text-decoration:none">Start a new deployment</a> of the environment that you have created.

   For example, create a Staging deployment to test your design.

3. _(Optional)_ Based on your requirements, add or update <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'resource'})" style="text-decoration:none">resources</a> in this environment and <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'redeploy'})" style="text-decoration:none">redeploy the existing deployment</a>. 

4. <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'version-release'})" style="text-decoration:none">Release the environment version</a>.

   No changes can be made to a released environment version. However, you can start new deployments or redeploy existing deployments with this environment version. 

5. <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'deploy'})" style="text-decoration:none">Start another new deployment</a> of the environment.

   For example, create a Production deployment to deploy your applications.

   _**Note:** For each new deployment, you can change the input variables based on your requirements. For example, you can use different VPC IDs for your Staging and Productions deployments._

6. _(Optional)_ <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'view-deploy'})" style="text-decoration:none">View all deployments</a> for this environment.

7. To make any updates to the environment, <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'env-version'})" style="text-decoration:none">create a new environment version</a> and then add or update <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'resource'})" style="text-decoration:none">resources</a> in this environment version.

   For example, create an environment version 02.00.00 that is based on version 01.00.00.

8. Based on your requirements, perform one of the following options:

   - <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'deploy'})" style="text-decoration:none">Start a new deployment</a> of the environment version that you have created.

   - <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'plan'})" style="text-decoration:none">Plan</a> and <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'redeploy'})" style="text-decoration:none">redeploy</a> an existing deployment with this environment version.

     For example, you can redeploy the Staging deployment of environment version 01.00.00 with this new environment version 02.00.00. In this case, only the delta between the two versions is deployed. Resources that have not been changed between the two versions are not impacted.

     _**Note:** When you redeploy an existing deployment with a different environment version, the deployment gets associated with that environment version._

9. <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'version-release'})" style="text-decoration:none">Release the environment version</a>.

_**Note:** In the case of layered environments, you must follow these steps for each environment within the layered environment. However, in addition to using the **Depends On** resource to create a dependency between the environments, you must also create a dependency between specific deployments of the environments. For example, the Staging deployment of a child environment must be dependent on the Staging deployment of the parent environment._

## <a id="provider" name="provider"></a>Configuring providers

Providers in Deploy Accelerator allow you to deploy and manage different types of infrastructure resources. They also contain the authentication details required to deploy and manage the resources. For example, an AWS provider contains credentials for accessing the Amazon Web Services (AWS) account in which you want to deploy and manage resources, such as EC2 instances, subnets, and S3 buckets.<br>

Deploy Accelerator supports many different types of providers, such as AWS, Microsoft Azure, and Kubernetes. When you create a new environment in Deploy Accelerator, you have to select a provider. The resources that are available for the environment are based on the selected provider.<br>

By default, only you can use the providers that you create. However, you can choose to <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'share-provider'})" style="text-decoration:none">share your own providers</a> with one or more groups.

### <a id="providerlist" name="providerlist"></a>Supported providers

The following table lists the providers that are supported in the latest version of Deploy Accelerator. It also lists supported versions of the [Terraform providers](<https://www.terraform.io/docs/providers/index.html>) that Deploy Accelerator uses to create and manage resources.

| Provider                    | Supported Terraform Provider Version |
| --------------------------- | ------------------------------------ |
| ACME                        | 1.6.3                                |
| Artifactory                 | 2.2.4                                |
| AWS                         | 3.23.0                               |
| Azure                       | 2.41.0                               |
| Azure Active Directory      | 1.1.1                                |
| Azure DevOps                | 0.1.0                                |
| Azure Stack (Beta)          | 0.9.0                                |
| Consul                      | 2.10.1                               |
| Databricks                  | 0.2.9                                |
| Datadog                     | 2.18.1                               |
| DNS                         | 3.0.0                                |
| Docker                      | 2.8.0                                |
| Google Cloud Platform       | 3.51.0                               |
| HEC-CP                      | None                                 |
| HEC-VM                      | None                                 |
| Helm2                       | 0.10.6                               |
| Helm3                       | 1.3.2                                |
| Kibana                      | 0.7.1                                |
| Kubernetes                  | 1.13.3                               |
| Oracle                      | 1.4.0                                |
| Oracle Cloud Infrastructure | 4.7.0                                |
| vSphere                     | 1.24.2                               |
| vSphere NSX-T (Beta)        | 3.1.0                                |

### <a id="create-provider" name="create-provider"></a>Create a provider

1. On the Home page, click the **More options** icon (![](/images/rean-platform-common/icon_more.PNG)) in the top-right corner.

2. Click **Providers**.

3. On the Provider page, click **NEW**.

   ![](/images/rean-deploy/rd_provider.PNG)

4. Enter the provider name and select the appropriate provider type (for example, AWS).

   For a complete list of provider types that are available in Deploy Accelerator, see <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'providerlist'})" style="text-decoration:none">Supported providers</a>.

5. In **Provider Details**, enter the authentication details that Deploy Accelerator must use to deploy and manage resources. 

   The provider details that you have to specify differ based on the selected provider type. For more information, see <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'provider-details'})" style="text-decoration:none">Provider details</a>.

   You can also click the **Terraform Provider Link** below the Provider Details box to view the Terraform documentation on the selected provider.

6. _(Only for AWS and Kubernetes provider types)_ To verify whether the JSON syntax and the authentication details that you have specified are correct, click **VALIDATE**.

   To also save the provider after successfully validating the provider details, click **VALIDATE & SAVE**.

   _**Note:** The **VALIDATE** and **VALIDATE & SAVE** buttons are enabled only if you have specified a valid JSON syntax in the provider details._

7. Click **SAVE**.

   A new provider appears in the **Providers List** section.

   _**Note:** The **SAVE** button is enabled only if you have specified a valid JSON syntax in the provider details._  	

8. _(Optional)_ <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'share-provider'})" style="text-decoration:none">Share the provider</a> with one or more groups.


_**Important:** If you later edit this provider, you must re-enter all values in the **Provider Details** section before you click **UPDATE**. Otherwise, an error message might be shown for deployments that use this provider._

### <a id="provider-delete" name="provider-delete"></a>Delete a provider

1. On the Home page, click the **More options** icon (![](/images/rean-platform-common/icon_more.PNG)) in the top-right corner, and then click **Providers**.
2. Under the **Provider List**, click **Delete** (![img](/images/rean-deploy/del.PNG)), and in the confirmation dialog box, click **Yes**. 
   Once a provider is deleted the provider credentials are also removed from the database.

Before deleting a provider, make sure that no environment is using the provider for deployments. If an  environment uses a provider, the provider cannot be deleted. 

### <a id="provider-details" name="provider-details"></a>Provider details

Deploy Accelerator supports multiple providers, such as AWS, Azure, and Kubernetes. While creating a provider, you have to specify authentication details that Deploy Accelerator can use to deploy and manage the resources.<br>

The following topics provide information about the required details for each provider type:

- <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'acme-details'})" style="text-decoration:none">ACME provider details</a>
- <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'art-details'})" style="text-decoration:none">Artifactory provider details</a>
- <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'aws-details'})" style="text-decoration:none">AWS provider details</a>
- <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'azure-details'})" style="text-decoration:none">Azure provider details</a>
- <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'azure-devops'})" style="text-decoration:none">Azure DevOps provider details</a>
- <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'consul-details'})" style="text-decoration:none">Consul provider details</a>
- <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'databricks-details'})" style="text-decoration:none">Databricks provider details</a>
- <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'datadog-details'})" style="text-decoration:none">Datadog provider details</a>
- <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'google-beta'})" style="text-decoration:none">Google provider details</a>
- <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'helm-details'})" style="text-decoration:none">Helm provider details</a>
- <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'kubernetes-details'})" style="text-decoration:none">Kubernetes provider details</a>
- <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'kibana-details'})" style="text-decoration:none">Kibana provider details</a>
- <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'oci-details'})" style="text-decoration:none">Oracle Cloud Infrastructure provider details</a>

#### <a id="acme-details" name="acme-details"></a>ACME provider details

The Automated Certificate Management Environment (ACME) is an evolving standard for the automation of a domain-validated certificate authority. The ACME provider allows you to acquire a valid SSL certificate from Let's Encrypt. The ACME provider supports a wide list of DNS challenge types, for example gcloud, azure, digitalocean, etc. For the complete list, see the [Terraform documentation](https://www.terraform.io/docs/providers/acme/dns_providers/index.html). 

Following are the parameters in an ACME provider:

| Parameter             | Details                                                      |
| --------------------- | ------------------------------------------------------------ |
| server_url            | The URL to the ACME endpoint's directory. This is a mandatory parameter. |
| config                | The list of key-value pair required according to the provider. You can enter a key parameter value here to override the values from provider_reference_id. This is an optional parameter. |
| provider_reference_id | The reference ID of the reference provider. This is an optional parameter. If you enter this parameter, you will not have to specify the credentials of the cloud provider used as **dns_challenge**. |

**Provider Details JSON Example**

```
{
  "server_url": "",
  "config": {
      AWS_ACCESS_KEY_ID     = "XXXXXX"
      AWS_SECRET_ACCESS_KEY = "XXXXXXX"
      AWS_DEFAULT_REGION    = "us-east-1"
    },
  "provider_reference_id": "1"
}
```

#### <a id="art-details" name="art-details"></a>Artifactory provider details

The Artifactory provider is to manage the resources for Artifactory. Following are the parameters in Artifactory provider:

| Parameter    | Details                                                      |
| ------------ | ------------------------------------------------------------ |
| url          | The URL for customer artifactory. This is a mandatory parameter. |
| username     | The username for accessing customer artifactory.             |
| password     | The password for logging in to customer artifactory.         |
| access_token | The access token for accessing the artifactory.              |
| api_key      | The API key for accessing the artifactory.                   |

*Note: You require only one type of parameter for authentication. Enter a username/password, or an access token, or an API key.*

**Provider Details JSON Example**

```
{
  "url": "http://www.example.com",
  "username": "XXXXX",
  "password": "XXXXX",
  "access_token": "XXXXX",
  "api_key": "XXXXXXXXXXX"
}
```



#### <a id="aws-details" name="aws-details"></a>AWS provider details

For the AWS provider type, you must select either **Basic Credentials** or **Instance Profile** to specify authentication details of the AWS account that Deploy Accelerator must use to deploy an environment. To use a more secure way of cross-account access, you must select **Assume Role**.

Consider the following points while selecting the option to specify authentication details.

- **Instance Profile with Assume Role**

  This method provides a more secure way for cross-account access. Consider a scenario in which Deploy Accelerator is deployed in an AWS account that is different from the accounts in which Deploy Accelerator must deploy the resources. Instead of storing the access credentials for all these accounts in Deploy Accelerator, you can attach a role to the instance on which Deploy Accelerator is deployed. Deploy Accelerator can then assume a role in the other accounts and deploy the resources. For more information about assuming roles, see [AWS documentation](https://docs.aws.amazon.com/cli/latest/userguide/cli-roles.html).<br>

  To use the **Instance Profile with Assume Role** method, you must attach a role to the instance on which Deploy Accelerator is deployed. For the other accounts, you must specify a role that Deploy Accelerator can assume to deploy the resources. The role that you specify must have permissions to deploy the required resources. It must also define the account in which Deploy Accelerator is deployed as a trusted entity.<br>

  In the **Provider Details** section, you must specify the details, as shown in the following example:

  ```json
  {
      "region": "xx-xxxx-x",
      "assume_role": {
          "role_arn": "arn:aws:iam::xxxxxxxxxxx:role/assume_role",
          "session_name": "SESSION-NAME",
          "external_id": "assume_role" 
      }    
  }
  ```

- **Instance Profile**

  This method provides a secure way of accessing the account in which Deploy Accelerator must deploy resources. However, Deploy Accelerator can use this method only if a role is attached to the instance on which Deploy Accelerator is deployed. This role must have the permissions to deploy the required resources.<br>

  To use the **Instance Profile** method, you must specify only the region in which the resources must be deployed, as shown in the following example:

  ```json
  {
      "region": "xx-xxxx-x"
  }
  ```

- **Static Credentials with Assume Role**

  This method provides another way for cross-account access. Consider a scenario in which Deploy Accelerator is deployed in an AWS account that is different from the accounts in which Deploy Accelerator must deploy the resources. Instead of storing the access credentials for all these accounts in Deploy Accelerator, you can specify long-term access credentials for only the parent account. Deploy Accelerator can then use temporary credentials to access all other child accounts by assuming roles in those accounts. For more information about assuming roles, see the [AWS documentation](https://docs.aws.amazon.com/cli/latest/userguide/cli-roles.html).<br>

  To use the **Static Credentials with Assume Role** method, you must specify the credentials for only the parent account. For each child account, you must specify a role that Deploy Accelerator can assume to deploy resources in that account. The role that you specify must have access to deploy the required resources. It must also define the parent account as a trusted entity.<br>

  In the **Provider Details** section, you must specify the details, as shown in the following example:

  ```json
  {
      "access_key": "xxxxxxxxxx",
      "secret_key": "xxxxxxxxxx",
      "region": "xx-xxxx-x",
      "assume_role": {
          "role_arn": "arn:aws:iam::xxxxxxxxxxx:role/assume_role",
          "session_name": "SESSION-NAME",
          "external_id": "assume_role" 
      }    
  }
  ```

- **Static Credentials**

  To use this method, you must specify the IAM user credentials for accessing the account in which Deploy Accelerator must deploy resources, as shown in the following example:

  ```json
  {
      "access_key": "ACCESS-KEY",
      "secret_key": "SECRET-KEY",
      "region": "xx-xxxx-x"    
  }
  ```

  The IAM user whose credentials you specify must have access to deploy the required resources.

#### <a id="azure-details" name="azure-details"></a>Azure provider details

The Azure provider is used to interact with the resources supported by Azure. 

Following are the parameters in an Azure provider:

| Parameter       | Details                                                      |
| --------------- | ------------------------------------------------------------ |
| subscription_id | A single Azure account can have multiple subscriptions. Enter the unique ID of your subscription to use Azure services. |
| client_id       | Enter the ID of your application in Azure Active Directory.  |
| client_secret   | Enter the authentication key for the specified application.  |
| tenant_id       | Enter the ID of the Azure Active Directory tenant with which the specified subscription is associated. |

#### <a id="azure-devops" name="azure-devops"></a>Azure DevOps provider details

The Azure DevOps provider is used to interact with the resources supported by Azure DevOps. 

Following are the parameters in an Azure DevOps provider:

| Parameter             | Details                                                      |
| --------------------- | ------------------------------------------------------------ |
| org_service_url       | (Required) This is the Azure DevOps organization URL.        |
| personal_access_token | (Required) This is the Azure DevOps organization personal access token. The account corresponding to the token will need "owner" privileges for this organization. |

#### <a id="consul-details" name="consul-details"></a>Consul provider details

The Consul provider is used to interact with the resources supported by Consul. 

Following are the parameters in an Consul provider:

| Parameter  | Details                                                      |
| ---------- | ------------------------------------------------------------ |
| address    | Public IP address of the instance on which Consul server is installed. |
| datacenter | The datacenter that is configured for the Consul server you have specified. |

The following is an example of the provider details section for a Consul provider.

```json
{
  "address": "123.0.57.189",
  "datacenter": "dc2"
}
```

#### <a id="databricks-details" name="databricks-details"></a>Databricks provider details

The Databricks provider is used to interact with the resources supported by Databricks. 

Following are the parameters in an Databricks provider:

| Parameters | Details                                                      |
| ---------- | ------------------------------------------------------------ |
| host       | (optional) This is the host of the Databricks workspace. It is a URL that you use to login to your workspace. |
| token      | (optional) This is the API token to authenticate into the workspace. |
| username   | (optional) This is the username of the user that can log into the workspace. |
| password   | (optional) This is the user's password that can log into the workspace. |
| profile    | (optional) Connection profile specified within `~/.databrickscfg`. To learn more about connect profiles, see [Databricks documentation.](https://docs.databricks.com/dev-tools/cli/index.html#connection-profiles) |

#### <a id="datadog-details" name="datadog-details"></a>Datadog provider details

The Datadog provider is used to interact with the resources supported by Datadog. 

Following are the parameters in an Datadog provider:

| Parameters          | Details                                                      |
| ------------------- | ------------------------------------------------------------ |
| api_key             | Datadog API key. This is a mandatory parameter if the `validate` parameter is set to **true**. |
| app_key             | Datadog APP key. This is a mandatory parameter if the `validate` parameter is set to **true**. |
| api_url (optional)  | The Datagog API URL.                                         |
| validate (optional) | Enables validation of the provided API and APP keys during provider initialization. Default is true. When false, `api_key` and `app_key` is not checked. |

#### <a id="google-beta" name="google-beta"></a>Google provider details

The Google provider is used to connect to Google Cloud Platform infrastructure products. You can also use Google beta resources in Google environments. Following are the parameters in the google beta provider:

| Parameters  | Details                                                      |
| ----------- | ------------------------------------------------------------ |
| Credentials | The `credentials` field is for entering the service account key in JSON format. You can generate a service account key using various methods, for more information, see [Google Cloud Platform documentation](https://cloud.google.com/iam/docs/creating-managing-service-account-keys). |
| Project     | The `project` field is your personal project id. The `project` indicates the default GCP project all of your resources will be created in. Most Terraform resources will have a `project` field. |
| Region      | The `region` is used to choose the default location for regional resources. Regional resources are spread across several zones. |

**Sample**

```json
{
   "credentials":{
      "type":"service_account",
      "project_id":"project-id",
      "private_key_id":"key-id",
      "private_key":"-----BEGIN PRIVATE KEY-----\nprivate-key\n-----END PRIVATE KEY-----\n",
      "client_email":"service-account-email",
      "client_id":"client-id",
      "auth_uri":"https://accounts.google.com/o/oauth2/auth",
      "token_uri":"https://accounts.google.com/o/oauth2/token",
      "auth_provider_x509_cert_url":"https://www.googleapis.com/oauth2/v1/certs",
      "client_x509_cert_url":"https://www.googleapis.com/robot/v1/metadata/x509/service-account-email"
   },
   "project":"my-project-id",
   "region":"us-central1"
}
```

#### <a id="helm-details" name="helm-details"></a>Helm provider details

Helm2 and Helm3 providers allow you to specify details of the Kubernetes cluster in which you want to deploy Helm charts.<br>

The difference between the Helm2 and Helm3 provider types is the Terraform Helm provider version that is supported.

- Helm2 provider supports version 0.10.4 
- Helm3 provider supports version 1.2.1 or later

Based on your requirements, you can choose the appropriate Helm provider type. The provider details that you have to specify for both provider types is the same.

_**Note:** Your administrator might have set the <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'administer', viewSection: 'helm-properties'})" style="text-decoration:none">properties</a> for the default helm repository from which Deploy Accelerator downloads helm charts while deploying environments with the Helm2 or Helm3 provider type. In this case, you do not have to add the **Helm Repository** data source in your environment if your helm chart is available in this repository._

<a id="helm-prereq" name="helm-prereq"></a>**Pre-requisites**

Before configuring a Helm2 or Helm3 provider, you must perform the following actions:

1. Ensure that the instance on which Deploy Accelerator is installed can access the Kubernetes cluster.

2. _(Only for Helm 2 provider)_ Ensure that Tiller is running in the Kubernetes cluster.

3. Modify the kubeconfig file (YAML format) that is used to configure access to your Kubernetes clusters. A kubeconfig file enables you to organize your clusters, users, and namespaces, and to define multiple contexts.

   In the kubeconfig file, locate the **certificate-authority**, **client-certificate**, and **client-key** attributes  and perform the following actions:

   - Replace the file paths specified in these attributes with the content of those files.
   - Append the attributes with **-data**, as shown below:
     **certificate-authority-data**, **client-certificate-data**, **client-key-data** 
   - Save the kubeconfig file.

4. _(Optional)_ If required, convert the kubeconfig file content to the base64 encoded format.

5. Convert the kubeconfig file content from the YAML format to the JSON format.

**Provider details**

While creating a Helm2 or Helm3 provider, you must populate the **config_path_Content** sub-attribute under the **kubernetes** attribute. In this attribute, enter the content (in JSON format) of the kubeconfig file that is used to configure access to your Kubernetes clusters. Ensure that you have completed all the <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'helm-prereq'})" style="text-decoration:none">pre-requisites</a> for the kubeconfig file.

You can enter the JSON content in one of the following ways:

- Paste the JSON file (with base64 encoded content) as a STRING value of the attribute, as shown in <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'helm-example1'})" style="text-decoration:none">Example 1</a>.

- Paste the JSON file content directly below the attribute, as shown in <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'helm-example2'})" style="text-decoration:none">Example 2</a>.


<a id="EKS-AWS_Support" name="EKS-AWS_Support"></a>If your cluster is deployed on AWS Elastic Kubernetes Service (EKS), you must also add the **aws** attribute below the **kubernetes** attribute. In the **aws** attribute, enter your authentication details for the AWS account that was used to create the cluster, as shown in <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'helm-example3'})" style="text-decoration:none">Example 3</a>. You can use all the supported methods of adding AWS authentication details. These methods include instance profile with and without assume role, and static credentials with and without assume role. For more information, see <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'aws-details'})" style="text-decoration:none">AWS provider details</a>.

<a id="GKE_Support" name="GKE_Support"></a> If your cluster is deployed on Google Kuberneters Engine (GKE), you must enter the authentication details for the Google account, as shown in <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'helm-example4'})" style="text-decoration:none">Example 4</a>.

_**Note**: In all examples of provider details,  you can add a reference provider to avoid specifying access key and the secret key in case of AWS, and service key content in case of Google cloud in the providers JSON._

_**Note:** If your kubeconfig file has multiple contexts, you must create a separate provider for each context that you want to use in Deploy Accelerator. To specify a context in a provider, you must also add the **config_context** attribute. If you do not specify the context while creating a provider, Deploy Accelerator considers the current context that is defined in the kubeconfig file._ 

<a id="helm-example1" name="helm-example1"></a>**Example 1** 

The following is an example of the provider details section for a Helm2 or Helm3 provider (JSON file with base64 encoded content entered as a STRING value of the **config_path_Content** attribute). 

```json
{
  "kubernetes": [
    {
      "config_path_Content": ""
    }
  ],
  "provider_reference_id": "1"
}
```

<a id="helm-example2" name="helm-example2"></a>**Example 2**

The following is an example of the provider details section for a Helm2 or Helm3 provider (JSON file entered below the **config_path_Content** attribute).

```json
{
    "kubernetes": [
        {
            "config_path_Content":
            {
                "apiVersion": "v1",
                "clusters": [
                    {
                        "cluster": null
                    }
                ],
                "certificate-authority-data": "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
                "server": "https://XXX.XX.XX.XX:8443",
                "name": "KubernetesCluster",
                "contexts": [
                    {
                        "context": null
                    }  
                ],
                "cluster": "KubernetesCluster",
                "user": "kubernetes",
                "current-context": "kubernetes",
                "kind": "Config",
                "preferences": {},
                "users": [
                    {
                        "name": "kubernetes"
                    }
                ],
                "client-certificate-data": "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
                "client-key-data": "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"
            }
        }
    ]
 }
```

<a id="helm-example3" name="helm-example3"></a>**Example 3**

The following is an example of the provider details section for a Helm2 or Helm3 provider for AWS EKS. 

```json
{
  "kubernetes": [
    {
      "config_path_Content": ""
    }
  ],
  "aws": [
    {
      "access_key": "",
      "secret_key": "",
      "region": ""
    }
  ],
  "provider_reference_id": "88"
}
```

<a id="helm-example4" name="helm-example4"></a>**Example 4**

The following is an example of the provider details section for a Helm2 or Helm3 provider for GKE. 

```
{
  "google": [
    {
      "zone": "XXXXX",
      "region": "XXXXXX",
      "project": "XXXXXX",
      "service_key_Content": "",
      "cluster": "XXXXXXXXXXX"
    }
  ]
}
```

To create a cluster in single or multiple zones, use the **zone** parameter. In this case, do not enter the value for the **region** parameter.

To create a regional cluster, use the **region** parameter. In this case, do not enter the value for the **zone** parameter. 

#### <a id="kibana-details" name="kibana-details"></a>Kibana provider details

The Kibana provider is used to interact with the resources supported by Kibana. 

Following are the parameters in an Kibana provider:

| Parameters          | Details                                                      |
| ------------------- | ------------------------------------------------------------ |
| elastic_search_path | The path at which elastic search is hosted.                  |
| kibana_uri          | The URI at which Kibana is hosted.                           |
| kibana_version      | (Optional) The version of Kibana configuration. For the list of supported versions, see [Kibana Terraform Provider documentation](https://github.com/ewilde/terraform-provider-kibana/#supported-kibana-versions). In case of empty field the default value is `6.0.0`. |
| kibana_type         | (Optional) The type of Kibana in the back-end. The default value is `KibanaTypeVanilla`, which supports the standard open-source kibana distribution. For more information, see [Kibana Terraform Provider documentation](https://github.com/elastic/kibana). To configure **logz.io** kibana, use `KibanaTypeLogzio`. |
| kibana_username     | (Optional) Username for Kibana API authentication.           |
| kibana_password     | (Optional) Password for Kibana API authentication.           |
| logzio_client_id    | (Optional) The client ID used for authentication with logzio. For more information, see [Kibana Terraform Provider documentation](https://github.com/ewilde/terraform-provider-kibana/tree/55e29f6119012ee2f2f37089412f19361bc9e890#authenticating-with-logzio). |
| logzio_account_id   | (Optional)The logz.io account id.                            |
| logzio_mfa_secret   | (Optional) MFA shared secret, create when signing up user account with MFA. |

#### <a id="kubernetes-details" name="kubernetes-details"></a>Kubernetes provider details

Kubernetes provider allows you to specify details of the Kubernetes cluster in which you want to deploy various resources.

<a id="k8s-prereq" name="k8s-prereq"></a>**Pre-requisites**

Before configuring a Kubernetes provider, you must perform the following actions:

1. Ensure that the instance on which Deploy Accelerator is installed can access the Kubernetes cluster.

2. Modify the kubeconfig file (YAML format) that is used to configure access to your Kubernetes clusters. A kubeconfig file enables you to organize your clusters, users, and namespaces, and to define multiple contexts.

   In the kubeconfig file, locate the **certificate-authority**, **client-certificate**, and **client-key** attributes  and perform the following actions:

   - Replace the file paths specified in these attributes with the content of those files.
   - Append the attributes with **-data**, as shown below:
     **certificate-authority-data**, **client-certificate-data**, **client-key-data** 
   - Save the kubeconfig file.

3. _(Optional)_ If required, convert the kubeconfig file content to the base64 encoded format.

4. Convert the kubeconfig file content from the YAML format to the JSON format.

**Provider details**

While creating a Kubernetes provider, you must populate the **config_path_Content** attribute. In this attribute, enter the content (in JSON format) of the kubeconfig file that is used to configure access to your Kubernetes clusters. Ensure that you have completed all the <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'k8s-prereq'})" style="text-decoration:none">pre-requisites</a> for the kubeconfig file.

You can enter the JSON content in one of the following ways:

- Paste the JSON file (with base64 encoded content) as a STRING value of the attribute, as shown in  <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'k8s-example1'})" style="text-decoration:none">Example 1</a>.
- Paste the JSON file content directly below the attribute, as shown in  <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'k8s-example2'})" style="text-decoration:none">Example 2</a>.

If your cluster is deployed on AWS Elastic Kubernetes Service (EKS), you must also add the **aws** attribute below the **config_path_Content** attribute. In the **aws** attribute, enter your authentication details for the AWS account that was used to create the cluster, as shown in <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'k8s-example3'})" style="text-decoration:none">Example 3</a>. You can use all the supported methods of adding AWS authentication details. These methods include instance profile with and without assume role, and static credentials with and without assume role. For more information, see <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'aws-details'})" style="text-decoration:none">AWS provider details</a>.

<a id="k8s-gke" name="k8s-gke"></a>If your cluster is deployed on Google Kuberneters Engine (GKE), you must enter the authentication details for the Google account, as shown in <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'k8s-example4'})" style="text-decoration:none">Example 4</a> and <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'k8s-example5'})" style="text-decoration:none">Example 5</a>

_**Note**: In all examples of provider details,  you can add a reference provider to avoid specifying access key and the secret key in case of AWS, and service key content in case of Google cloud in the providers JSON._

_**Note:** If your kubeconfig file has multiple contexts, you must create a separate provider for each context that you want to use in Deploy Accelerator. To specify a context in a provider, you must also add the **config_context** attribute. If you do not specify the context while creating a provider, Deploy Accelerator considers the current context that is defined in the kubeconfig file._ 

<a id="k8s-example1" name="k8s-example1"></a>**Example 1**

The following is an example of the provider details section for a Kubernetes provider (JSON file with base64 encoded content entered as a STRING value of the **config_path_Content** attribute).

```json
{
  "config_path_Content": "",
  "provider_reference_id": "1"
}
```

<a id="k8s-example2" name="k8s-example2"></a>**Example 2**

The following is an example of the provider details section for a Kubernetes provider (JSON file entered below the **config_path_Content** attribute).

```json
{
    "config_path_Content":
        {
            "apiVersion": "v1",
            "clusters": [
                {
                    "cluster": null
                }
            ],
            "certificate-authority-data": "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
            "server": "https://XXX.XX.XX.XX:8443",
            "name": "KubernetesCluster",
            "contexts": [
                {
                    "context": null
                }
            ],
            "cluster": "KubernetesCluster",
            "user": "kubernetes",
            "current-context": "kubernetes",
            "kind": "Config",
            "preferences": {},
            "users": [
                {
                    "name": "kubernetes"
                }
            ],
            "client-certificate-data": "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
            "client-key-data": "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"
        }
      "provider_reference_id": "1"
}
```

<a id="k8s-example3" name="k8s-example3"></a>**Example 3**

The following is an example of the provider details section for a Kubernetes provider for AWS EKS.

```json
{
    "config_path_Content": "XXXXXXXXXXXXXXXXXXXXXXXXX",
    "aws": [
        {
            "access_key": "XXXX",
            "secret_key": "XXX",
            "region": "XXXX"
        }
    ]
}
```

<a id="k8s-example4" name="k8s-example4"></a>**Example 4**

The following is an example of the provider details section for a Kubernetes provider for GKE.

```
{
  "google": [
    {
      "zone": "XXXXXXXX",
      "region": "XXXXXXX",
      "project": "XXXXXXX",
      "service_key_Content": "",
      "cluster": "XXXXXXXXX"
    }
  ]
}
```

<a id="k8s-example5" name="k8s-example5"></a>**Example 5**

The following is an example of the provider details section for a Kubernetes provider for GKE using a reference provider.

```
{
  "google": [
    {
      "zone": "",
      "region": "",
      "project": "",
      "service_key_Content": "",
      "cluster": ""
    }
  ],
   "provider_reference_id": "1"
}
```

To create a cluster in single or multiple zones, use the **zone** parameter. In this case, do not enter the value for the **region** parameter.

To create a regional cluster, use the **region** parameter. In this case, do not enter the value for the **zone** parameter. 

#### <a id="oci-details" name="oci-details"></a>Oracle Cloud Infrastructure provider details

The Oracle Cloud Infrastructure is for managing the resources of the Oracle Cloud Infrastructure. Following are the parameters in the Oracle Cloud Infrastructure provider:

| Parameter    | Details                                                      |
| ------------ | ------------------------------------------------------------ |
| tenancy_ocid | OCID of your tenancy. For more information, see [Oracle Cloud Infrastructure documentation](https://docs.cloud.oracle.com/iaas/Content/API/Concepts/apisigningkey.htm#five). |
| user_ocid    | OCID of the user calling the API. For more information, see [Oracle Cloud Infrastructure documentation](https://docs.cloud.oracle.com/iaas/Content/API/Concepts/apisigningkey.htm#five). |
| fingerprint  | Fingerprint for the key pair being used. For more information, see [Oracle Cloud Infrastructure documentation](https://docs.cloud.oracle.com/iaas/Content/API/Concepts/apisigningkey.htm#four). |
| private_key  | The path (including filename) of the private key stored on your computer, required if `private_key` is not defined. For information on how to create and configure keys, see [Oracle Cloud Infrastructure documentation](https://docs.cloud.oracle.com/iaas/Content/API/Concepts/apisigningkey.htm#three). |
| region       | An Oracle Cloud Infrastructure region. For more information, see [Oracle Cloud Infrastructure documentation](https://docs.cloud.oracle.com/iaas/Content/General/Concepts/regions.htm). |

**Provider Details JSON Example**

```
{
  "tenancy_ocid": "XXXXXXXXXXX",
  "user_ocid": "XXXXXXXXXX",
  "fingerprint": "XXXXXXXXX",
  "private_key": "XXXXXXXXX",
  "region": "XXXXXXXXXXX"
} 
```

### <a id="share-provider" name="share-provider"></a>Share a provider

Deploy Accelerator enables you to share your provider with other users. The ability to share providers is useful when multiple users in a group need to use the same provider to deploy environments. These users can view, edit, share, or delete providers that are shared with them based on the permissions assigned to their group.

1. On the Home page, click the ![](/images/rean-platform-common/icon_more.PNG) icon in the top-right corner.

2. Click **Providers**.

3. On the Providers List page, click the ![](/images/rean-deploy/icon_share_provider.PNG) icon for the provider that you want to share with other users.

   You can identify the providers that are shared with you based on the color of the provider name. You can share a shared provider only if your group has been assigned the Share permission for that provider.

4. In the Share Provider : _ProviderName_ window, click the ![](/images/rean-deploy/icon_sharegroup.PNG) icon for the **Group** with which you want to share the provider.

   _**Note:** You can view only the groups to which you belong. Only Cloud Accelerator Platform administrators can view all groups._ 

   ![](/images/rean-deploy/rd_share_provider.PNG)

5. To assign permissions to users of the selected group. Select the appropriate permission check boxes and click **DONE**.

   _**Note:** You can select one or more permission check boxes for each group of users._

6. Read the warning message and perform one of the following actions:

   - If you want to proceed with sharing the provider, select the Warning check box and click **SUBMIT**.
   - If you no longer want to share the provider, click **CANCEL**.


## <a id="connection" name="connection"></a>Configuring connections

Amazon Elastic Compute Cloud (EC2) uses public-key cryptography to encrypt and decrypt login information. When Deploy Accelerator launches an instance as part of deploying an environment, it specifies the name of a key pair (set of public and private keys) that must be used to connect to the instance.<br>

Each connection that you create contains the private key that can be used to connect to one or more instances in your environments. While creating an environment, you must specify a connection that is applied to all instances by default. You can also <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'share-connection'})" style="text-decoration:none">share your own connections</a> with one or more groups.<br>

_**Note:** If you do not want to use the default connection for all instances in an environment, you can create multiple connections. You can also choose to dynamically generate a key pair and associate it with one or more instances while the environment is being deployed. For an example of the step-by-step procedure to dynamically generate and associate a key pair with an instance, see <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'generate-keypair'})" style="text-decoration:none">Configure the dynamic generation of a key pair</a>._<br>

### <a id="create-connection" name="create-connection"></a>Create a connection

1. Create the required key pair by using either Amazon EC2 or a third-party tool.

   If you use a third-party tool, you must also import the public keys to Amazon EC2. 

   For more information, see the [Amazon Elastic Compute Cloud User Guide for Linux Instances](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html) or the [Amazon Elastic Compute Cloud User Guide for Windows Instances](http://docs.aws.amazon.com/AWSEC2/latest/WindowsGuide/ec2-key-pairs.html).

   _**Important:** To create a key pair by using Amazon EC2, you must have your own AWS cloud account._

2. On the Home page, click the **More options** icon (![](/images/rean-platform-common/icon_more.PNG)) in the top-right corner and then click **Connections**.

3. On the Add/Edit Connection page, click **NEW**.

   ![](/images/rean-deploy/rd_connection.PNG)

4. Enter the connection name and connection type.

5. If you have selected the **WinRM** connection type, perform the following actions:

   - In **SSH/WinRM User**, enter **administrator**. 

   - In **SSH/WinRM Password**, enter the password that Deploy Accelerator must use for the connection.

   - _(Optional)_ To set up a secure connection, select **Https** and enter a CA certificate in **Cacert**

     _**Note:** If you want Deploy Accelerator to skip validation of the CA certificate, you can select **Insecure**._

   - _(Optional)_ To use NTLM authentication for remote connection, select **NTLM**.

   _**Important:** When you select a WinRM connection for an instance, you must also specify a <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'powershell'})" style="text-decoration:none">PowerShell script</a> in the **user_data** attribute of that EC2 Instance resource. The user and password that you specify in the PowerShell script and the selected WinRM connection must match. Otherwise, you cannot deploy packages on that instance._

6. If you have selected the **SSH** connection type, enter the user and perform one of the following actions:

   - In **SSH/WinRM Password**, enter the password that Deploy Accelerator must use for the connection.
   - In **SSH Key**, enter the SSH key instead of a password.

7. _(Optional)_ To specify details of a Bastion Host in the connection, select **Bastion Connection**, enter the following details, and then click **SET PARAMETER**.

   - User
   - Password *(enter either the password or the key)*
   - Host *(IP address of the Bastion host, which must be available in the network)*
   - Port *(By default, the port number is selected based on the connection type.)*
   - Key

   You can use a Bastion connection based on how your network is configured. If the connection that you are creating is for instances in a private network and a Bastion Host is configured to connect to those instances, you must also specify details for connecting to the Bastion host.

   _**Note:** The **Bastion Connection** link is enabled only for the SSH connection type._

8. Click **SAVE**.

   A new connection appears under the **Connection List** section.

9. _(Optional)_ <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'share-connection'})" style="text-decoration:none">Share the connection</a> with one or more groups.  

### <a id="share-connection" name="share-connection"></a>Share a connection

Deploy Accelerator enables you to share your connection with other users. The ability to share connections is useful when multiple users in a group need to use the same connection for the instances that they are deploying. These users can view, edit, or delete connections that are shared with them based on the permissions assigned to their group.

1. On the Home page, click the **More options** icon (![](/images/rean-platform-common/icon_more.PNG)) in the top-right corner.

2. Click **Connections**.

3. On the Connection List page, click the **Share** icon (![](/images/rean-deploy/icon_share_provider.PNG)) for the connection that you want to share with other users.

   _**Note:** You can identify the connections that are shared with you based on the color of the connection name._

4. In the Share Connection: _ConnectionName_ window, click the ![](/images/rean-deploy/icon_sharegroup.PNG) icon for the **Group** with which you want to share the connection.

   _**Note:** You can view only the groups to which you belong. Only Cloud Accelerator Platform administrators can view all groups._ 

   ![](/images/rean-deploy/rd_share_connection.PNG)

5. To assign permissions to users of the selected group, select the appropriate permission check boxes and click **DONE**.

   _**Note:** You can select one or more permission check boxes for each group of users._

6. Read the warning message and perform one of the following actions:

   - If you want to proceed with sharing the connection, select the Warning check box and click **SUBMIT**.
   - If you no longer want to share the connection, click **CANCEL**.

## <a id="environments" name="environments"></a>Creating environments

The process to create an environment includes multiple steps, as shown in the following image. 

![](/images/rean-deploy/createenv_endtoend.png)

1. <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'create-env'})" style="text-decoration:none">Create an environment</a>
2. <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'resource'})" style="text-decoration:none">Add resources</a>
3. <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'packages'})" style="text-decoration:none">Add packages</a>
4. <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'config'})" style="text-decoration:none">Configure the environment</a>

To create a <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'layered-env'})" style="text-decoration:none">layered environment</a>, you must perform these steps for each environment that is a part of the layered environment. For more information, see <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'create-layered-env'})" style="text-decoration:none">Creating layered environments</a>.<br>

### <a id="before" name="before"></a>Before you begin

Before you create an environment, ensure that you have performed the following actions:

- Configured the appropriate cloud account (for example, AWS account) in which you want to deploy an environment. For more information, see <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'provider'})" style="text-decoration:none">Configure providers</a>.
- Created the connections that Deploy Accelerator can use to connect to the instances in your deployed environment. For more information, see <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'connection'})" style="text-decoration:none">Configure connections</a>.

### <a id="create-env" name="create-env"></a>Create an environment

![](/images/rean-deploy/createenv_01.png)

<a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'create-env'})" style="text-decoration:none">**Create an environment**</a> **>** <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'resource'})" style="text-decoration:none">Add resources</a> **>** <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'packages'})" style="text-decoration:none">Add packages</a> **>** <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'config'})" style="text-decoration:none">Configure the environment</a>

1. On the canvas, click the **Create Environment** icon (![](/images/rean-deploy/icon_envcreate.PNG)).

2. In the Create Environment window, enter a unique name and description for the environment that you want to create. 

   ![](/images/rean-deploy/rd_createenv.PNG)

3. Enter a version for the environment.

   By default, 01.00.00 is specified as the version for a new environment. If required, you can specify a different version.

   The environment version that you specify must not exceed 40 characters. Also, the initial part of the version must be in the **xx.xx.xx** format (for example, **02.10.18**). You can choose to append this value with a dash (-) followed by a custom alphanumeric value (for example, **02.10.18-updated)**. Ensure that there is no space before the dash (-) and the custom value that you specify does not contain a colon (:).

4. From the **Environment Package Type** list, select the package type that you want to use for this environment. 
   Under the **Packages** tab, the **Private Packages** list is populated depending on the Environment Package Type selected for creating the environment.

   _**Note:** Deploy Accelerator supports the Chef Solo, Chef Server, Ansible Solo, and Puppet package types. However, the options that are shown in the **Environment Package Type** list are based on the <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'administer', viewSection: 'package-type'})" style="text-decoration:none">configuration by your administrator</a>._

5. From the **Connection** list, select the default connection for all instances in this environment.

   You can identify shared connections in the list based on the color of the connection name.

   _**Note:** You can choose to associate a different connection when an instance is added to the environment. The connection associated with an instance takes precedence over the default connection that is specified while creating the environment._

6. From the **Provider** list, select the appropriate account for accessing the cloud provider that you want to use to deploy the environment.

   You can identify shared providers in the list based on the color of the provider name.

7. *(Optional)* From the **AWS Region** list, select the appropriate AWS region where you want to deploy the environment.

   _**Note:** If you select an AWS Region while creating an environment, any predefined region in the Provider is overwritten with the new AWS Region._

8. _(Only if Chef Server is selected as the environment package type)_ To associate a Chef Server with the environment, perform the following actions:

   - From the **Chef Server** list, select the Chef Server from which you want to display packages.
   - From the **Chef Environment** list, select one of the environments that are available on the selected Chef Server.

   For this environment, the **Packages** tab in the left panel displays packages that are available in the selected Chef Server and environment.

9. Based on your requirements, perform one of the following actions:

   - To create the environment, click **CREATE**.

      A new environment is created and added to the list of environments. If required, you can later <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'collaboration'})" style="text-decoration:none">share this environment</a> with other users.

   - To create the environment and share it with other users, perform the following actions:

      - Click **CREATE & SHARE**.

      - In the Share Environment window, select the appropriate permission check boxes for the groups with which you want to share the environment.

         _**Note:** You can view only the groups to which you belong. Only Cloud Accelerator Platform administrators can view all groups._

         ![](/images/rean-deploy/rd_createenv_share.PNG)

      - _(Optional)_ To go back to the Create Environment window and modify environment details, click the **Edit** icon (![](/images/rean-deploy/icon_envcreateshare.PNG)).

      - To create and share the environment, click **CREATE & SHARE**.

         The environment is shared with all users who are members of the selected groups.

         _**Note:** The following entities related to this environment are not automatically shared with the same groups:_

         - _New versions of the environment_
         - _Deployments of the environment_
         - _Providers and connections configured in the environment_

         _You must separately share these entities with the appropriate groups. For more information, see <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'deploy-share'})" style="text-decoration:none">sharing deployments</a>, <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'collaboration'})" style="text-decoration:none">sharing environments</a>, <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'share-provider'})" style="text-decoration:none">sharing providers</a>, and <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'share-connection'})" style="text-decoration:none">sharing connections</a>._

### <a id="resource" name="resource"></a>Add resources to the environment

![](/images/rean-deploy/createenv_02.png)

<a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'create-env'})" style="text-decoration:none">Create an environment</a> **>** <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'resource'})" style="text-decoration:none">**Add resources**</a> **>** <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'packages'})" style="text-decoration:none">Add packages</a> **>** <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'config'})" style="text-decoration:none">Configure the environment</a>

Resources are an important element of environments in Deploy Accelerator. They represent entities that you require to set up the infrastructure, such as an instance, Internet gateway, VPN connection, and Security group. You can also add Terraform data sources, <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'tf-module'})" style="text-decoration:none">Terraform modules</a>, and <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'tf-random'})" style="text-decoration:none">Terraform Random Provider resources</a> in your environment.

You can add resources and data sources to the environment by using either the <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'add-res-ds'})" style="text-decoration:none">resource attributes form </a> or the <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'tf-code'})" style="text-decoration:none">HCL editor</a>.

_**Notes:**_

- _After you <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'deploy'})" style="text-decoration:none">start a deployment of the environment</a>, you can view various attributes of a resource for that deployment, such as its public IP address, on the **Resource Details** tab in the right panel._
- _You can also add resources to an environment version after it has been deployed. These new resources get created when you start a new deployment or redeploy an existing deployment. However, no changes can be made to a released environment version._
- _If you rearrange a resource on the canvas, you must save the environment to retain the changed position of that resource._

#### <a id="add-res-ds" name="add-res-ds"></a>Add resources and data sources to the environment

1. In the new environment that you have created, from the left panel, click the **Resources** tab.

   The **Resources** tab contains the following sections:

   - The **Resources** section displays many resources that you can add to your environment. You can also use the additional <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'rd-resources'})" style="text-decoration:none">Deploy Accelerator resources</a> to address <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'resource-scenarios'})" style="text-decoration:none">specific scenarios</a>.
   - The **Data Sources** section displays many Terraform data sources that you can add to your environment. For more information about data sources, see the [HashiCorp Terraform documentation](https://www.terraform.io/docs/configuration/data-sources.html).

2. From the **Resources** tab, drag a resource or data source to the canvas.
   You can identify a data source in your environment based on the color of the data source name, as shown in the following example:

   ![](/images/rean-deploy/rd_datasource.PNG)

3. In the Resource Name window, enter a unique name and click **CREATE**. 

   ![](/images/rean-deploy/Import_resource.PNG)

4. Click the resource or data source that you have created.

5. In the right panel that opens, on the **Resource** tab, enter the required details.

   Consider the following points while configuring the resource attributes.

   | Goal                                                         | Action                                                       |
   | ------------------------------------------------------------ | ------------------------------------------------------------ |
   | Configure the connection and key pair that Deploy Accelerator must use to connect to a non-Windows instance. | In the **Connection** attribute, select the appropriate SSH connection to connect to an instance. By default, the connection that is specified while creating this environment is associated with the instance.<br><br>In the **key_name** attribute, specify the corresponding key pair that Deploy Accelerator must associate with the instance when it is launched. Based on your requirements, you can also specify multiple key pairs.<br><br>_**Note:** To use a key pair that is dynamically generated while the environment is being deployed, you can select **Use Custom Connection**. The procedure to dynamically generate and associate a key pair with an instance includes multiple steps. For more information, see <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'generate-keypair'})" style="text-decoration:none">Configure the dynamic generation of a key pair</a>._ |
   | Configure the connection and user data that Deploy Accelerator must use to connect to a Windows instance | In the **Connection** attribute, select the appropriate WinRM connection to connect to an instance. By default, the connection that is specified while creating this environment is associated with the instance.<br><br>In the **user_data** attribute, you must specify a PowerShell script to enable Windows Remote Management (WinRM) on the instance and set the user and password. (See sample <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'powershell'})" style="text-decoration:none">PowerShell script</a>).<br><br>_**Important:** You must ensure that the security group associated with the instance allows inbound traffic (ingress) from the port that you specify in the PowerShell script._ |
   | Create multiple resources based on the same configuration    | In the **Count** attribute, specify the number of identical resources that you want to create while deploying the environment. |
   | Create a dependency on another resource in this environment  | In the **Depends On** attribute, specify the name of the resource on which you want to create a dependency. |
   | Use a variable that is defined in an **Input Variable** resource in this environment | In any attribute, use the appropriate interpolation syntax based on the type of input variable that you are referring. For more information, see <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'input-use-format'})" style="text-decoration:none">Formats for using input variables in resources</a>. |
   | Use a local value that is defined in a **locals** resource in this environment. | In any attribute, use the following interpolation syntax to refer to a local variable that is defined in the **locals** resource.<br>${*localResourceName*.*variableName*}<br><br>A local value can be a simple constant or an expression that can be defined once and used multiple times in different resources within the same environment. For more information, see the [Terraform documentation](<https://www.terraform.io/docs/configuration-0-11/locals.html>). |
   | Reference attributes of another resource in the same environment<br><br>For information about the supported attributes, select the resource whose attributes you want to reference and then click the resource type link at the top of the **Resource** tab in the right panel. | Use the following interpolation syntax:<br>${*ResourceName*.*Attribute*} |
   | Reference attributes of a data source in the same environment | Use the following interpolation syntax:<br>${*DataSourceName*.*Attribute*} |
   | Set array for attributes of the Text type                    | While entering array values in attributes, specify each value on a separate line.<br><br>The following image shows an example of array values for the **vpc_security_groups_ids** attribute of an **AWS Instance**:<br>![](/images/rean-deploy/Set_array_example.PNG) |
   | <a id="flatten" name="flatten"></a>Apply Flatten flag for string array in JSON, or JSON array of the resources. | To apply a Flatten flag on string arrays or nested string arrays in a JSON, or JSON array, select the **Flatten** toggle switch. <br />The Flatten function is for replacing a nested string array list with a single flattened array.<br />The array with the Flatten flag, returns a flattened sequence while migrating or importing the blueprint.<br >**Example**<br />-- JSON and JSON array <br />![](/images/rean-deploy/JSON_flatten.png)<br />-- String array<br />![](/images/rean-deploy/array_flatten.png) |
   | <a id="timeout" name="timeout"></a> Add a timeout for creating, reading, updating, or deleting resources. | Use the **Timeouts** attribute for adding a timeout for creating, reading, updating, or deleting resources. <br />You can define timeout for the following actions:<br />- **Create**: To add a timeout while creating resources.<br />- **Update**: To add a timeout while updating resources. <br />- **Read**: To add a timeout while reading resources.<br />- **Delete**:  To add a timeout while deleting resources.<br />The timeout is added in the following JSON format:<br /><br />![](/images/rean-deploy/timeout.png)<br /><br />To check the actions supported by a resource, click the **Timeouts** attribute in resource attributes form to open its relevant Hashicorp resource documentation.<br /><br />![](/images/rean-deploy/sub.png) |

   <a id="powershell" name="powershell"></a>**Sample PowerShell script for a Windows instance**

   While creating a Windows instance, you must select a WinRM connection. In the **user_data** attribute of the instance, you must specify a PowerShell script to enable Windows Remote Management (WinRM) on the instance and set the user and password.

   The following is an example of the PowerShell script that can be specified in the **user_data** attribute.

   ```powershell
   <powershell>
   if ([Environment]::OSVersion.Version -ge (new-object 'Version' 6,1)) {
      New-NetFirewallRule -DisplayName "Allow WinRM" -Direction Inbound -Action Allow -Protocol TCP  -EdgeTraversalPolicy Allow -LocalPort 5985
   } else {
       netsh advfirewall firewall add rule name="Allow WinRM" dir=in protocol=TCP localport=5985 action=allow remoteip=any localip=any profile=any
   }
   winrm set winrm/config/service/auth '@{Basic="true"}'
   winrm set winrm/config/service '@{AllowUnencrypted="true"}'
   $admin = [adsi]("WinNT://./administrator, user")
   $admin.psbase.invoke("SetPassword", "password@123")
   </powershell>
   ```

6. To add other resources or data sources, repeat steps 2 to 5.

7. _(Optional)_ <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'resource-copy'})" style="text-decoration:none">Copy an existing resource</a> from either the same environment or a different environment.

8. _(Optional)_ To remove an extra resource or data source from the canvas, click the **x** icon on that resource.

9. _(Optional)_ To view the links that are created when a resource uses the **Depends On** attribute or the interpolation syntax to reference another resource, click the **Links** icon (![](/images/rean-deploy/icon_links.PNG)).

10. Click the **Save** icon (![](/images/rean-deploy/icon_envsave.PNG)).

11. *(Optional)* To switch from resource attributes form to HCL code, select **Switch to Hashicorp Configuration Language**.
    The switch confirmation dialog box appears.

    ![](/images/rean-deploy/switch.png)

    Switching from attributes form to HCL code will delete previous configurations defined for the resources. To continue with the switch, select the checkbox, and click **SWITCH**.

    For information about using the HCL code, see <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'tf-code'})" style="text-decoration:none">Add resources and data sources using Hashicorp Configuration Language</a>.

#### <a id="tf-code" name="tf-code"></a>Add resources and data sources using Hashicorp Configuration Language

1. In the new environment that you have created, from the left panel, click the **Resources** tab.

   The **Resources** tab contains the following sections:

   - The **Resources** section displays many resources that you can add to your environment. You can also use the additional <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'rd-resources'})" style="text-decoration:none">Deploy Accelerator resources</a> to address <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'resource-scenarios'})" style="text-decoration:none">specific scenarios</a>.
   - The **Data Sources** section displays many Terraform data sources that you can add to your environment. For more information about data sources, see the [HashiCorp Terraform documentation](https://www.terraform.io/docs/configuration/data-sources.html).

2. From the **Resources** tab, drag a resource or data source to the canvas.
   You can identify a data source in your environment based on the color of the data source name, as shown in the following example:

   ![](/images/rean-deploy/rd_datasource.PNG)

3. In the Resource Name window, enter a unique name, turn on the **Switch to Hashicorp Configuration Language** toggle switch, and click **CREATE**.

   ![](/images/rean-deploy/Import_resource.PNG)

4. Click the resource or data source that you have created.

   In the right panel that opens, you will see an HCL Editor on the **Resource** tab.

   ![](/images/rean-deploy/hcl_code.png)

5. In the HCL Editor, insert the HCL code for your resource.

6. Click the **Save** icon (![](/images/rean-deploy/icon_envsave.PNG)).

7. (*Optional*) To switch the resource definition from HCL code to the default resource attributes form, turn off the **Switch to Hashicorp Configuration Language** toggle. 
   The switch confirmation dialog box appears.

   ![](/images/rean-deploy/switch.png)

   Switching from HCL code to attributes form will delete previous configurations defined for the resources. To continue with the switch, select the checkbox, and click **SWITCH**.

   For information about using the default resource attributes form, see <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'add-res-ds'})" style="text-decoration:none">**Add resources and data sources to the environment**</a>.

#### <a id="tf-module" name="tf-module"></a>Add Terraform modules to the environment

Deploy Accelerator allows you to use an existing Terraform module in the environment. Terraform defines a module *as a container for multiple resources that are used together*. For more information about creating modules, see the [Terraform documentation](<https://www.terraform.io/docs/modules/index.html>).<br>

To use an existing Terraform module, you can add the **Terraform Module** resource to the environment and specify the source from where the module can be downloaded.<br>

**To add a Terraform module to the environment, perform the following actions:**

1. In the new environment that you have created, from the left panel, click the **Resources** tab.

2. From the **Resources** tab, drag the **Terraform Module** resource to the canvas.

3. In the Resource Name window, enter a unique name and click **CREATE**. 

4. Click the Terraform Module resource that you have created.

5. In the right panel that opens, on the **Resource** tab, enter the following details:

   - **source:** Enter the source from where to download the Terraform Module. Deploy Accelerator supports the following sources for Terraform Modules.

     | Source type                                                  | Supported format                                             |
     | ------------------------------------------------------------ | ------------------------------------------------------------ |
     | Terraform public registry                                    | `<NAMESPACE>/<NAME>/<PROVIDER><br>`<br><br>**Example:**<br>`terraform-aws-modules/vpc/aws` |
     | GitHub repository (public)                                   | `github.com/<REPOSITORY-CLONE-URL>?ref=<VERSION><br>`<br><br>**Example:**<br>`github.com/terraform-aws-modules/terraform-aws-vpc.git?ref=v1.66.0`<br><br>_**Note:** If you do not specify the version, Deploy Accelerator downloads the latest version of the Terraform Module._ |
     | GitHub repository (private)                                  | `git::https://<USERNAME>:<PASSWORD>@github.com/<REPOSITORY-CLONE-URL>?ref=<VERSION>`<br><br>**Example:**<br>`git::https://sampleuser:samplepassword@github.com/sample-demo/terraform-module.git?ref=v1.66.0`<br><br>_**Note:** If you do not specify the version, Deploy Accelerator downloads the latest version of the Terraform Module._ |
     | Artifactory (<a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'admin', viewSection: 'artifactory-properties'})" style="text-decoration:none">configured in Deploy Accelerator</a>) | `artifactory::<OBJECT-RELATIVE-PATH>`<br><br>**Example:**<br>`artifactory::local-demo-sample/module/aws_vpc.zip`<br><br>_**Note:** The Artifactory URL that is configured in the **dnow.properties** file is prefixed to the path that you specify in the **source** attribute._ |

   - **input:** Input parameters for the Terraform Module.

     You can use the interpolation syntax to reference the output of other resources in the same environment or a parent environment as input to the Terraform module.

   - **tags:** Tags that you want to assign to all resources in the Terraform Module. However, ensure that the Terraform Module supports tags.

   - **version:** Version of the Terraform Module to download. Use this attribute when you specify a Terraform public registry in the **source** attribute.

     _**Note:** If you do not specify the version, Deploy Accelerator downloads the latest version of the Terraform Module from the Terraform public registry._

6. Click the **Save** icon (![](/images/rean-deploy/icon_envsave.PNG)).

_**Note:** You can use the interpolation syntax to reference the output of this Terraform module in other resources within the same environment or in child environments._

#### <a id="tf-random" name="tf-random"></a>Add Terraform Random Provider resources to the environment

Deploy Accelerator allows you to use Terraform Random Provider resources in the environment. These resources are always available on the **Resources** tab irrespective of the provider type that is selected for the environment.<br>

Terraform defines the Random Provider as a logical provider that allows the use of randomness within Terraform configurations...it provides resources that generate random values during their creation and then hold those values steady until the inputs are changed. For more information about the Random Provider, see the [Terraform documentation](https://registry.terraform.io/providers/hashicorp/random/latest/docs).<br>

**To add a Random Provider resource to the environment, perform the following actions:**

1. In the new environment that you have created, from the left panel, click the **Resources** tab.

2. From the **Resources** tab, drag the appropriate Random Provider resource to the canvas.

   A few examples of the Random Provider resources are **Random Id**, **Random Password**, and **Random String**.

3. In the Resource Name window, enter a unique name and click **CREATE**. 

4. Click the Random resource that you have created.

5. In the right panel that opens, on the **Resource** tab, enter the required details.

   For more information about the resource attributes, click the resource type link at the top of the **Resource** tab, as shown in the following image.

   ![](/images/rean-deploy/rd_resourcedoclink.PNG)

6. Click the **Save** icon (![](/images/rean-deploy/icon_envsave.PNG)).

### <a id="packages" name="packages"></a>Add packages to the resources

![](/images/rean-deploy/createenv_03.png)

<a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'create-env'})" style="text-decoration:none">Create an environment</a> **>** <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'resource'})" style="text-decoration:none">Add resources</a> **>** <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'packages'})" style="text-decoration:none">**Add packages**</a> **>** <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'config'})" style="text-decoration:none">Configure the environment</a>

Packages in Deploy Accelerator are entities that use supported infrastructure automation tools to configure compute resources in an environment. Chef Solo and Chef Server are configured by default in Deploy Accelerator. However, your administrator might have also configured the use of Ansible and Puppet packages.<br>

Each package references a Chef cookbook, Ansible playbook, or Puppet manifest file or module. You can add user-defined packages to install your own custom applications on compute resources.<br>

_**Important:** Deploy Accelerator cannot deploy packages on resources that are already deployed. Therefore, you must add the appropriate packages to a resource before you <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'deploy'})" style="text-decoration:none">start a new deployment</a> of the environment._<br>

_**Best practice:** If you need to frequently deploy new versions of a package on a resource, you can <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'create-layered-env'})" style="text-decoration:none">create a layered environment</a>. The parent environment can contain all your infrastructure resources, while the child environment can contain the **Virtual VM** resource to which you can add the appropriate package version. Each time you update the package version on the **Virtual VM** resource, you can destroy and redeploy the child environment--without having to destroy the parent environment that contains the infrastructure._

**To add packages to the resources, perform the following actions:**

1. In the new environment that you have created, from the left panel, click the **Packages** tab, and drag the appropriate package to a compute resource (for example, an EC2 Instance resource for AWS) on the canvas. 

   The **Packages** tab displays packages of only the environment package type (Chef Solo, Chef Server, Ansible Solo or Puppet) that you have selected.

   If you have selected Chef Server as the environment package type, the **Packages** tab also displays roles from the selected Chef Server. You can add both Chef Server packages and roles to a compute resource.

   The following utility packages are always shown irrespective of the environment package type that is selected.

   | Utility package    | Details                                                      |
   | ------------------ | ------------------------------------------------------------ |
   | file               | Uploads a file on the resource to which it is added.         |
   | execute-script     | Runs a script on the resource to which it is added. You can specify whether the script must be run after the resource is created or before it is destroyed. |
   | local-exec         | Runs a command on the instance on which Deploy Accelerator is deployed. You can specify whether the command must be run after the environment is deployed or before it is destroyed.<br><br>The local-exec package can be added to any resource in the environment. |
   | chef_configuration | Restricts Deploy Accelerator from installing the ChefDK client on instances before deploying packages. You must set the **skip_install** attribute of this package to **true**.<br><br>_**Note:** This package is available only in environments for which Chef Server is selected as the environment package type._ |

2. Click the package or role.

3. In the right panel, on the **PACKAGES** tab, select the package or role that you have added to the resource.

4. _(Optional)_ From the **Package Version** list, select another version of the package or role.

   ![](/images/rean-deploy/rd_packageversionlist.PNG)

   By default, the latest released version of the package or role is selected. Based on your requirements, you can select another version of the package or role. Ideally, you should add an unreleased version of a package or role to an environment only if you want to test that version.

5. _(Chef Solo and Chef Server packages only)_ From the **Recipes** list, select one or more recipes that you want to run on the resource.

   All recipes that the selected cookbook (or package) contains appear in the list. You must select the recipes in the order in which they must be run on the resource.

   If you do not select any recipe, Deploy Accelerator runs the default recipe that is defined in the cookbook.

6. Enter other details about the package or role.

   _**Note:** The details that you must specify for each package are different. For example, in case of the **execute-script** package, you can specify whether the script must be run after the resource is created or before it is destroyed by selecting the appropriate option from the **when** list._

   ![](/images/rean-deploy/rd_executescript.PNG)

7. _(Optional)_ To drag additional packages or roles to the resource, repeat steps 1 to 6.

   If you add multiple packages and roles to a resource, the packages and roles are arranged from top to bottom by default. However, you can drag and rearrange the packages and roles in the order in which you want to run them on the resource.

   _**Note:** The utility packages are always run on the resource before the other selected packages and roles. However, if you add multiple utility packages to a resource, you must arrange these packages in the order in which you want to run them on the resource._

8. To add packages or roles to other resources, repeat steps 3 to 6.

9. *(Optional)* To remove a package or role from a resource, click the **x** icon on that package or role.

10. Click the **Save** icon (![](/images/rean-deploy/icon_envsave.PNG)).

### <a id="config" name="config"></a>Configure the environment 

![](/images/rean-deploy/createenv_04.png)

<a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'create-env'})" style="text-decoration:none">Create an environment</a> **>** <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'resource'})" style="text-decoration:none">Add resources</a> **>** <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'packages'})" style="text-decoration:none">Add packages</a> **>** <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'config'})" style="text-decoration:none">**Configure the environment**</a>

Based on your requirements, you can configure additional settings for the environment. This step is optional in the end-to-end process of creating environments.

1. In the new environment that you have created, click the **Configure** icon (![](/images/rean-deploy/icon_config.PNG)).

2. Based on your requirements, perform the following actions in the Configuration window:
   - On the **Environment** tab, edit the following details for the selected environment version:

     ![](/images/rean-deploy/config_env.PNG)

     - Edit the description of the environment.

     - Edit the connection, provider, or AWS Region for the environment.

       For information about configuring connections and providers, see <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'connection'})" style="text-decoration:none">Configure connection</a> and <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'provider'})" style="text-decoration:none">Configure provider</a>.

     - To assign a custom tag to all resources in the environment, select that custom tag from the **Custom Tag** list.

       To view the key-pair values in the selected custom tag, move your cursor on the ![](/images/rean-deploy/icon_public_env.PNG) icon.

        For information about creating or editing a custom tag, see <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'tags'})" style="text-decoration:none">Configuring custom tags</a>.

     - _(Only if Chef Server is selected as the environment package type)_ Edit the Chef Server or Chef Environment that is selected for the environment.

   - On the **Deployment** tab, configure the following details that are applied by default to all deployments of this environment version:

     ![](/images/rean-deploy/config_deploy.PNG)

     - Under **Deploy**, specify the scripts that must be run before or after starting a deploying.

     - Under **Destroy**, specify the scripts that must be run before or after destroying a deployment. 

     - Select **Destroy After** and then specify the duration after which Deploy Accelerator must destroy a deployment. 

       By default, Deploy Accelerator does not destroy any deployment. 

   - <a id="env-email" name="env-email"></a>On the **Notification** tab, specify the email notification details that are applied to all deployments of this environment version:

     ![](/images/rean-deploy/config_notify.PNG)

     - **Email:** By default, Deploy Accelerator sends email notifications to the registered email address of the user who starts or destroys a deployment. However, you can specify an additional email address to which all emails notifications must also be sent.

     - **Deploy Template:** Deploy Accelerator uses the default template for sending an email when a deployment is started. However, you can specify your own custom template.

     - **Destroy Template:** Deploy Accelerator uses the default template for sending an email when a deployment is destroyed. However, you can specify your own custom template.

     - **Deployment Initiation:** Deploy Accelerator uses this setting to determine whether or not email notifications must be sent to users as soon as they start new deployments or destroy existing deployments of this environment.

       To set environment-level preferences, select **YES** or **NO**. If you select **DEFAULT**, Deploy Accelerator considers the <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-platform-common', viewPage: 'createAndAccessAccount', viewSection: 'preferences'})" style="text-decoration:none">user-level preferences</a> of the users. If none are set, Deploy Accelerator considers the <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'administer', viewSection: 'email-properties'})" style="text-decoration:none">application-level preferences</a>.

     - **Deployment Complete:** Deploy Accelerator uses this setting to determine whether or not email notifications must be sent to users after new deployments of this environment either succeed or fail, and  existing deployments are successfully destroyed.

       To set environment-level preferences, select **YES** or **NO**. If you select **DEFAULT**, Deploy Accelerator considers the <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-platform-common', viewPage: 'createAndAccessAccount', viewSection: 'preferences'})" style="text-decoration:none">user-level preferences</a> of the users. If none are set, Deploy Accelerator considers the <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'administer', viewSection: 'email-properties'})" style="text-decoration:none">application-level preferences</a>.

     _**Note:** Contact your system administrator for a list of custom email templates that might be available._

3. Click **SAVE**.

### Where to go next

When you are ready to create the infrastructure that you have designed in your environment, you can <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'deploy'})" style="text-decoration:none">start a new deployment</a>. 

## <a id="create-layered-env" name="create-layered-env"></a>Creating a layered environment

Layered environments in Deploy Accelerator are a collection of environments in which some environments (child) are dependent on other environments (parent). You can create layered environments for complex IT infrastructures.<br>

The implementation of layered environments allows you to easily update, deploy, and destroy a set of resources (or a layer) without affecting resources in other environments (or layers). Therefore, it is recommended that you create layered environments, instead of standalone environments, to deploy applications.<br>

To create layered environments, you require the following two resources:

- **Output:** You must add this resource in the parent environment. This resource enables you to expose some resource attribute values from the parent environment in the form of variables. These variables can then be referenced in other dependent (child) environments.
- **Depends On:** You must add this resource in the child environment. This resource enables you to create a dependency on another environment. Based on your requirements, you can add multiple Depends On resources in a child environment.  

**To create a layered environment, perform the following actions:**

1. To create the parent environment, perform the following actions:

   - <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'create-env'})" style="text-decoration:none">Create an environment</a>.

   - <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'resource'})" style="text-decoration:none">Add the required resources in the environment</a>.

   - To reference attributes of the parent environment in one or more child environments, add the **Output** resource.

     In the **Output** resource, create a JSON file and specify variables that can be used in child environments. The value of these output variables can use the interpolation syntax to reference attributes of other resources in the parent environment. If you have added the **Input Variable** resource, the output variables can also reference the input variables. 

   - Save the environment.

2. To create the child environment, perform the following actions:

   - <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'create-env'})" style="text-decoration:none">Create an environment</a>.

   - Add the **Depends On** resource in the environment.

     The name of the **Depends On** resource should ideally indicate the environment on which there is a dependency (for example: **dependson_network**).

     In the **reference_type** attribute of the **Depends On** resource, select **Environment Name**. In the **Depends_On** attribute, select the appropriate parent environment version.

     _**Note:** You can also select **S3** in the **reference_type** attribute of the **Depends On** resource. For more information, see <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'dependson-resource'})" style="text-decoration:none">Deploy Accelerator resources</a>._

   - <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'resource'})" style="text-decoration:none">Add other required resources in the child environment</a>. 

     To reference attribute values of resources in the parent environment, use the following interpolation syntax:

     **Syntax:** **${_DependsOnResourceName.OutputVariableName_}**

     **Example:** **${_dependson_network.subnet_}**

   - Save the environment.

3. To confirm that the dependency on the parent environment, click the **Environment Dependency View** icon (![](/images/rean-deploy/icon_blueprintview.PNG)).

## <a id="blueprint" name="blueprint"></a>Creating new environments from blueprints

<a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'overview-blueprints'})" style="text-decoration:none">Blueprints</a> are templates of commonly used IT infrastructures. Deploy Accelerator users can <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'export-blueprint'})" style="text-decoration:none">export their environments as blueprints</a> and <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'bp-gallery'})" style="text-decoration:none">add them in the Blueprint Gallery</a>.<br>

You can leverage blueprints to quickly create infrastructure for solutions. Deploy Accelerator allows you to create new environments from blueprints by using any of the following methods:

- <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'oob-blueprint'})" style="text-decoration:none">Import blueprints from the Blueprint Gallery</a>
- <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'oob-bp-api'})" style="text-decoration:none">Import blueprints from the Artifactory by using an API</a>
- <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'custom-blueprint'})" style="text-decoration:none">Import blueprints from your computer</a>

_**Important:** If you create a layered environment from a blueprint, you must deploy the environments in a particular order. You must first deploy the environment in the top layer, then the environment in the next layer, and so on until the environment in the lowest layer. You must follow this order because child environments can be deployed only if their parent environments are already deployed._

### <a id="bp-before" name="bp-before"></a>Before you begin

Before you create an environment from a blueprint, ensure that you have configured the appropriate <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'provider'})" style="text-decoration:none">providers</a> and <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'connection'})" style="text-decoration:none">connections</a> that can be used for each environment in the blueprint.
### <a id="oob-blueprint" name="oob-blueprint"></a>Import blueprints from the Blueprint Gallery

The Blueprint Gallery in Deploy Accelerator is a repository of blueprints that can be templates of industry-standard cloud or IT infrastructure architectures or custom solutions. Your administrator has to <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'administer', viewSection: 'bp-configure'})" style="text-decoration:none">enable and configure the Blueprint Gallery</a>. Also, blueprints are not available out of the box and have to be <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'bp-gallery'})" style="text-decoration:none">added in the Blueprint Gallery</a>.<br>

The following image shows an example of the Blueprint Gallery.

![](/images/rean-deploy/blueprint_gallery.PNG)

**To import blueprints from the Blueprint Gallery, perform the following actions:**

1. On the Home page, click the **More options** icon (![](/images/rean-platform-common/icon_more.PNG)) in the top-right corner and then click **Blueprint Gallery**. 

2. <a id="bp-sync" name="bp-sync"></a>_(Optional)_ To manually refresh the Blueprint Gallery to display all latest updates, perform the following actions:

   - Click **Sync Blueprint**.

   - In the confirmation message box, click **YES**.

      It might take a few minutes to sync the blueprint data from the Artifactory.

   - Refresh the browser after a few minutes.

   _**Note:** By default, the Blueprint Gallery is automatically refreshed every 30 minutes. However, your administrator might have configured a different sync interval based on requirements._ 

3. On the Blueprint Gallery page, browse or search for a blueprint that meets your requirements.

   The search results include blueprints that contain the search keyword in the blueprint name, description, owner name, or owner email. 

   Searches are not case-sensitive and use partial keyword matching. For example, if you specify **layer** as the search keyword, the search results include blueprints with the name **NetworkLayer** and **MultilayerEnvironment**.

   _**Note:** You can also sort the blueprints based on the blueprint name or owner name. By default, blueprints are sorted based on the blueprint names in the descending order._

4. From the version list of the blueprint that you want to import, select the appropriate version.

   For details about the selected blueprint version, hover over **Description**. To access the ReadMe file of the selected blueprint version, click **README**.

   To view the email address of the blueprint owner, hover over the owner name. However, the email address is not shown if the blueprint owner is **admin**. Also, the owner name and email address is shown only if these values are available in the blueprint metadata.

5. To import the selected blueprint version, click **IMPORT**.

6. _(Only if the blueprint contains multiple environments)_ In the Select Environments window, select the check boxes for the environments that you want to import and click **START IMPORT**.

   You can choose not to select an environment that already exists in Deploy Accelerator. This environment might have been previously imported as a part of another blueprint.

   _**Note:** While importing a blueprint, if you did not select a parent environment because it already exists in Deploy Accelerator, the dependency between the existing parent environment and the other selected environments in the blueprint is automatically retained. However, the name and version of the parent environment in Deploy Accelerator and the blueprint must match._

7. In the Import Environments window, for each environment, perform the following actions:

   - Enter a unique combination of name and version for the environment that you are importing.

     The environment version that you specify must not exceed 40 characters. Also, the initial part of the version must be in the **xx.xx.xx** format (for example, **02.10.18**). You can choose to append this value with a dash (-) followed by a custom alphanumeric value (for example, **02.10.18-updated)**. Ensure that there is no space before the dash (-) and the custom value that you specify does not contain a colon (:).

     _**Note:** If you enter an existing environment name and a unique version for that environment, the imported environment is added as a version of that existing environment._

   - _(Optional)_ Update the description for the environment. By default, the description from the blueprint is shown.

   - From the **Connection** list, select the appropriate connection.

     You can identify shared connections based on the color of the connection name.

   - From the **Provider** list, select the provider that you want to use to deploy the environment.

     You can identify shared providers based on the color of the provider name.

     _**Note:** The list displays providers of only the provider type that was used to create an environment in the blueprint. For example, if an environment in the blueprint was created by using an AWS provider, you can view only available AWS providers in the list._

   - If Chef Server is set as the environment package type in the selected environment, perform the following actions:

     - From the **Chef Server** list, select the Chef Server from which you want to display packages.
     - From the **Chef Environment** list, select one of the environments that are available on the selected Chef Server.

     For this environment, the **Packages** tab in the left panel displays packages that are available in the selected Chef Server and environment.

8. Based on your requirements, perform one of the following actions:

   - To import all environments, click **IMPORT ALL**.

   - To import all environments and share with other users, perform the following actions:

      - Click **IMPORT ALL & SHARE**.

      - In the Share Environment window, select the appropriate permission check boxes for the groups with which you want to share all environments.

         You can view only the groups to which you belong. Only Cloud Accelerator Platform administrators can view all groups.

         ![](/images/rean-deploy/rd_blueprint_import-03.PNG)

      - _(Optional)_ To go back to the Import Environments window and modify environment details, click the **Edit** icon (![](/images/rean-deploy/icon_envcreateshare.PNG)).

      - Click **IMPORT ALL & SHARE**.

         The imported environments are shared with all users who are members of the selected groups.

         _**Note:** The providers and connections configured in these imported environments are not automatically shared with the same groups. You must separately share the <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'share-provider'})" style="text-decoration:none">providers</a> and <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'share-connection'})" style="text-decoration:none">connections</a> with the appropriate groups._

   After all the environments in the blueprint are successfully imported, the environment in the lowest layer of the blueprint is opened by default. All other selected environments that are a part of the blueprint appear in the list of environments.

   _**Note:**_

   - _If there is an error in importing even one of the environments in a blueprint, the other environments in the blueprint are also not imported._
   - _When you import a blueprint from the Blueprint Gallery, all environments in that blueprint are in the **Released** state. If input variables have been used for any resource attributes, you can update the values of these input variables while <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'deploy'})" style="text-decoration:none">starting a new deployment</a>. Alternatively, you can <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'env-version'})" style="text-decoration:none">create a new environment version</a> and update the values of any resource attributes._

9. _(Optional)_ Ensure that the environment in the lowest layer of the blueprint is opened on the canvas and click the **Environment Dependency View** icon (![](/images/rean-deploy/icon_blueprintview.PNG)).

   This view helps you to verify that the dependency between the environments in the imported blueprint has been maintained,  For more information, see <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'blueprintview'})" style="text-decoration:none">Viewing dependency between environments</a>.


### <a id="oob-bp-api" name="oob-bp-api"></a>Import blueprints from the Artifactory by using an API

The Blueprint Gallery in Deploy Accelerator is a repository of blueprints that can be templates of industry-standard cloud or IT infrastructure architectures or custom solutions. Your administrator has to <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'administer', viewSection: 'bp-configure'})" style="text-decoration:none">enable the Blueprint Gallery</a> and specify a repository in the Artifactory for storing the blueprints.<br>

Based on your requirements, you can either <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'oob-blueprint'})" style="text-decoration:none">import blueprints from the Blueprint Gallery</a> or import blueprints from the Artifactory by using an API.<br>

The **importBlueprintFromArtifactory** API allows you to import blueprints from the specified repository in the Artifactory. You can specify the following parameters for importing a blueprint:

- blueprintName

- blueprintVersion

- environmentNamePrefix

  This parameter is optional. The value that you specify for this parameter is added as a prefix to the names of all environments that are imported as a part of the blueprint.

- groupName

  This parameter is optional. The group that you specify for this parameter is assigned the **View** and **Deploy** share permission for all the imported environments.

For more information about the API, see the Deploy Accelerator API documentation:
**https://*YOUR_PLATFORM_BASE_URL*/api-documentation/hcapdeploy/api-docs/index.html#/Environment/importBlueprintFromArtifactory**

### <a id="custom-blueprint" name="custom-blueprint"></a>Import blueprints from your computer

1. On the canvas, click the **More** icon (![](/images/rean-deploy/icon_more_bar.PNG)) and then click **Import**.

2. In the Import Environment/Blueprint window, perform the following actions:

   - Click **Choose File** and then select the blueprint (JSON file) that you want to import.

   - Click **Upload**.

3. *(Only if the blueprint contains multiple environments)* In the Select Environments window, select the check boxes for the environments that you want to import and click **START IMPORT**.

   ![](/images/rean-deploy/rd_blueprint_import-01.PNG)

   You can choose not to select an environment that already exists in Deploy Accelerator. This environment might have been previously imported as part of another blueprint.

   _**Note:** While importing a blueprint, if you did not select a parent environment because it already exists in Deploy Accelerator, the dependency between the existing parent environment and the other selected environments in the blueprint is automatically retained. However, the name and version of the parent environment in Deploy Accelerator and the blueprint must match._

4. In the Import Environments window, for each environment, perform the following actions:

   - Enter a unique combination of name and version for the environment that you are importing.

     The environment version that you specify must not exceed 40 characters. Also, the initial part of the version must be in the **xx.xx.xx** format (for example, **02.10.18**). You can choose to append this value with a dash (-) followed by a custom alphanumeric value (for example, **02.10.18-updated)**. Ensure that there is no space before the dash (-) and the custom value that you specify does not contain a colon (:).

     _**Note:** If you enter an existing environment name and a unique version for that environment, the imported environment is added as a version of that existing environment._

   - Enter the description for the environment that you are importing.

   - From **Connection**, select the appropriate connection.

     You can identify shared connections based on the color of the connection name.

   - From **Provider**, select the provider that you want to use to deploy the environment.

     You can identify shared providers based on the color of the provider name.

     _**Note:** The list displays providers of only the provider type that was used to create an environment in the blueprint. For example, if an environment in the blueprint was created by using an AWS provider, you can view only available AWS providers in the list._

   - If Chef Server is set as the environment package type in the selected environment, perform the following actions:

     - From **Chef Server**, select the Chef Server from which you want to display packages.
     - From **Chef Environment**, select one of the environments that are available on the selected Chef Server.

     For this environment, the **Packages** tab in the left panel displays packages that are available in the selected Chef Server and environment.

5. Based on your requirements, perform one of the following actions:

   - To import all environments, click **IMPORT ALL**.

   - To import all environments and share with other users, perform the following actions:

     - Click **IMPORT ALL & SHARE**.

     - In the Share Environment window, select the appropriate permission check boxes for the groups with which you want to share all environments.

       You can view only the groups to which you belong. Only Cloud Accelerator Platform administrators can view all groups.

       ![](/images/rean-deploy/rd_blueprint_import-03.PNG)

     - _(Optional)_ To go back to the Import Environments window and modify environment details, click the **Edit** icon (![](/images/rean-deploy/icon_envcreateshare.PNG)).

     - Click **IMPORT ALL & SHARE**.

       The imported environments are shared with all users who are members of the selected groups.

       _**Note:** The providers and connections configured in these imported environments are not automatically shared with the same groups. You must separately share the <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'share-provider'})" style="text-decoration:none">providers</a> and <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'share-connection'})" style="text-decoration:none">connections</a> with the appropriate groups._

   After all the environments in the blueprint are successfully imported, the environment in the lowest layer of the blueprint is opened by default. All other selected environments that are a part of the blueprint appear in the list of environments.

   When you import a blueprint from your computer, the state of environments in that blueprint are dependent on their state when they were exported. For example, if parent and child environments in the **Released** state were exported as a blueprint, they are in the **Released** State when the blueprint is imported.

   _**Note:**_

   - _If there is an error in importing even one of the environments in a blueprint, the other environments in the blueprint are also not imported._
   - _If the imported environments are in a **Released** state and if input variables have been used for any resource attributes, you can update the values of these input variables while <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'deploy'})" style="text-decoration:none">starting a new deployment</a>. Alternatively, you can <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'env-version'})" style="text-decoration:none">create a new environment version</a> and update the values of any resource attributes._

6. _(Optional)_ Ensure that the environment in the lowest layer of the blueprint is opened on the canvas and click the **Environment Dependency View** icon (![](/images/rean-deploy/icon_blueprintview.PNG)).

   This view helps you to verify that the dependency between the environments in the imported blueprint has been maintained,  For more information, see <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'blueprintview'})" style="text-decoration:none">Viewing dependency between environments</a>.


## <a id="copy" name="copy"></a>Copying environments

1. On the Home page, click the **More options** icon (![](/images/rean-platform-common/icon_more.PNG)) in the top-right corner and then click **Environments**.

2. On the Environment List page, click the environment that you want to copy.

3. On the canvas, click the **More** icon (![](/images/rean-deploy/icon_more_bar.PNG)) and then click **Copy**.

   The environment version that is currently selected is copied.

4. In the Create Environment window, enter a unique name, description, and version for the environment that you are creating.

   The environment version that you specify must not exceed 40 characters. Also, the initial part of the version must be in the **xx.xx.xx** format (for example, **02.10.18**). You can choose to append this value with a dash (-) followed by a custom alphanumeric value (for example, **02.10.18-updated)**. Ensure that there is no space before the dash (-) and the custom value that you specify does not contain a colon (:).

5. From the **Connection** list, select the default connection for all instances in the environment.

   You can identify shared connections in the drop-down based on the color of the connection name.

   _**Note:** You can choose to associate a different connection when an instance is added to the environment. The connection associated with an instance takes precedence over the default connection that is specified while creating the environment._

6. From the **Provider** list, select the cloud provider that you want to use to deploy the environment.

   You can identify shared providers in the drop-down based on the color of the provider name.

7. *(Optional)* After selecting the provider, select the appropriate AWS region where you want to deploy an environment.

   _**Note:** If you select an AWS region while creating an environment, any predefined region in the provider is overwritten with the new AWS region._

8. If Chef Server is selected as the environment package type in the environment that you are copying, perform the following actions:

   - From the **Chef Server** list, select the Chef Server from which you want to display packages.
   - From the **Chef Environment** list, select one of the environments that are available on the selected Chef Server.

   For this environment, the **Packages** tab in the left panel displays packages that are available in the selected Chef Server and environment.

9. Based on your requirements, perform one of the following actions:

   - To create the environment, click **CREATE**.

     A new environment is created and added to the list of environments. If required, you can later <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'collaboration'})" style="text-decoration:none">share this environment</a> with other users.

   - To create the environment and share it with other users, perform the following actions:

     - Click **CREATE & SHARE**.

       In the Share Environment window, the share permissions of the environment that you have copied are automatically applied to this environment.

     - _(Optional)_ Modify the share permissions for this environment by selecting new or clearing existing permission check boxes for the appropriate groups.

       _**Note:** You can view only the groups to which you belong. Only Cloud Accelerator Platform administrators can view all groups._

     - _(Optional)_ To go back to the Create Environment window and modify environment details, click the **Edit** icon (![](/images/rean-deploy/icon_envcreateshare.PNG)).

     - To create and share the environment, click **CREATE & SHARE**.

       The environment is shared with all users who are members of the selected groups.

       _**Note:** The following entities related to this environment are not automatically shared with the selected groups:_

       - _New versions of the environment_
       - _Deployments of the environment_
       - _Providers and connections configured in the environment_

       _You must separately share these entities with the appropriate groups. For more information, see <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'deploy-share'})" style="text-decoration:none">sharing deployments</a>, <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'collaboration'})" style="text-decoration:none">sharing environments</a>, <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'share-provider'})" style="text-decoration:none">sharing providers</a>, and <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'share-connection'})" style="text-decoration:none">sharing connections</a>._

## <a id="deploy" name="deploy"></a>Starting new deployments

Each environment can have multiple versions. When you are ready to create the infrastructure that you have designed in an environment version, you can start a new deployment. If required, each environment version can also have multiple deployments, such as Staging and Production.<br>

_**Important:** You can deploy child environments only if their parent environments are already deployed. Therefore, in the case of a <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'layered-env'})" style="text-decoration:none">layered environment</a>, you must deploy the environments it contains in a particular order. You must first deploy the parent environment in the top layer, then the child environment in the next layer, and so on until the child environment in the lowest layer._<br>

**To start a new deployment, perform the following actions:**

1. On the Home page, click the **More options** icon (![](/images/rean-platform-common/icon_more.PNG)) in the top-right corner and then click **Environments**.

2. On the Environment List page, click the appropriate environment.

3. From the version list on the canvas, select the environment version that you want to deploy.

4. To start a new deployment, click the **Deploy** icon (![](/images/rean-deploy/icon_envdeploy.PNG)).

   The Review and Deploy: *EnvironmentName* window displays the default values that are configured for the environment. For more information, see <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'config'})" style="text-decoration:none">Configure the environment</a>.

5. _(Optional)_ To start a quick deployment with default values, click **QUICK DEPLOY**.
   _(Optional)_ On the **Environment** tab, perform the following actions based on your requirements:

   ![](/images/rean-deploy/reviewanddeploy.PNG)

   - Edit the <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'connection'})" style="text-decoration:none">connection</a>, <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'provider'})" style="text-decoration:none">provider</a>, and AWS region that must be used for this deployment.

     _**Note:** If you select an AWS region while starting a deployment, any predefined region in the provider is overwritten with the new AWS region._

   - From the **Custom Tag** list, select the <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'tags'})" style="text-decoration:none">custom tag</a> that you want to assign to all resources that are deployed.

     To view the key-pair values in the selected custom tag, hover over the ![](/images/rean-deploy/icon_public_env.PNG) icon.

     _**Note:** If you have also specified key-pair values in the **tags** attribute of a resource in the environment, Deploy Accelerator attaches both the custom tag and resource-level tag values to the resource. However, if the same tag is defined in both locations, precedence is given to the resource-level tag value._

   - _(Only if Chef Server is selected as the environment package type)_ Edit the Chef Server or Chef Environment that must be used for this deployment.

   - Following additional information is displayed:

     - Provider version: The version of the provider used for deploying the environment.
     - Package Type: The package types used for deploying the environment.
     - Created By: The user who created the environment.

7. On the **Deployment** tab, perform the following actions based on your requirements:

   ![](/images/rean-deploy/reviewanddeploy_deploytab.PNG)

   - Under **Deploy**, enter the following details:

     - Enter the deployment name and description.

       _**Note:** The deployment name must be unique across all versions of the selected environment._

     - In **Input Variables**, add or update the input variables based on your requirements.

       These input variables are additional to the input variables that are already defined in the **Input Variables** resource in the selected environment version. If the same input variable is defined in both locations, the value specified while deploying is given precedence.

       For information about the different ways in which you can define input variables, see <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'input-define-format'})" style="text-decoration:none">Formats for defining input variables</a>.

     - Under **Parent Deployments Mapping**, select a parent deployment for each **Depends On** resource from the corresponding list.

       Each list displays deployments of only the parent environment version that is selected in the **Depends On** resource. Parent deployments of the same name as the child deployment name are selected by default.

       _**Note:** The **Parent Deployment Mapping** section is visible only if the environment has at least one **Depends On** resource._

     - Specify the scripts that must be run before or after starting a deploying.

   - Under **Destroy**, specify the scripts that must be run before or after destroying a deployment.

   - Select **Destroy After** and then specify the duration after which Deploy Accelerator must destroy a deployment.

8. _(Optional)_ On the **Notification** tab, specify the email and template details for this deployment.

   ![](/images/rean-deploy/reviewanddeploy_notifytab.PNG)

   By default, Deploy Accelerator sends email notifications to the registered email address of the user who starts a deployment. However, you can specify an additional email address to which all emails notifications must also be sent.

   If required, you can specify custom templates for sending an email when a deployment is started or destroyed. Contact your system administrator for a list of custom email templates that might be available.

   _**Note:** You cannot customize the **Deployment Initiation** and **Deployment Complete** settings for a deployment. These settings are <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'env-email'})" style="text-decoration:none">configured at the environment level</a>._

9. To start a new deployment, click **START NEW DEPLOYMENT**.

   The ![](/images/rean-deploy/icon_env_deployed.PNG) icon appears on resources that are successfully deployed. The ![](/images/rean-deploy/icon_env_failed.PNG) icon appears on resources that could not be successfully deployed.

10. *(Optional)* To view the resource logs, click the **Logs** icon (![](/images/rean-deploy/icon_envlogs.PNG)).

11. _(Optional)_ To stop a deployment that is in progress, perform the following actions:

    - Click the **Stop** icon next to the **Deploying** status.

      ![](/images/rean-deploy/stopicon.PNG)

    - In the confirmation box, click **YES STOP IT**.

      The status of the deployment changes to **Stopping**. Deploy Accelerator deploys all resources in progress and then stops the deployment. The status of the deployment changes to **Stopped**. 

      _**Note:** If Deploy Accelerator is unable to successfully deploy any of the resources in progress, the status changes to **Failed** instead of **Stopped**._ 


## <a id="view-deploy" name="view-deploy"></a>Viewing deployments

Each environment version can have multiple deployments, such as Staging and Production. You can view the list of your deployments for an environment across all versions. You can also view the deployments that other users have shared with you. The deployment list also displays the status of each deployment -- deployed (![](/images/rean-deploy/icon_env_deployed.PNG)) or failed (![](/images/rean-deploy/icon_env_failed.PNG)).

1. On the Home page, click the **More options** icon (![](/images/rean-platform-common/icon_more.PNG)) in the top-right corner and then click **Environments**.

2. On the Environment List page, click the appropriate environment.

   The deployment name tab on the canvas displays the latest deployment of the selected environment version.

   ![](/images/rean-deploy/rd_deploymentnametab.PNG)

3. To view the list of your own and shared deployments across all versions of the environment, click the deployment list on the canvas.

   ![](/images/rean-deploy/rd_deploymentslist.PNG)

   _**Note:** You can identify the deployments that are shared with you based on the color of the deployment name._

4. In the list of deployments, click the deployment name that you want to open on the canvas.

5. To view additional information related to the deployment after it is complete, select **Deployment Details** on the Canvas. 

   ![](/images/rean-deploy/dep_details.PNG)

   The Deployment Details displays information about the following parameters:
   
   - Deployment ID: The ID for deploying the environment.
   
   - Deployment run ID: The run ID for querying the database for troubleshooting.
   
   - Deployment Owner: User who had run the environment deployment.
   
   - Deployment Input Variables: Additional deployment variables.
   
     ![](/images/rean-deploy/dep_details2.PNG)

## <a id="plan" name="plan"></a>Viewing the plan for deployments

Before you start a new deployment or redeploy an existing deployment, you can view the plan that Deploy Accelerator generates. This plan provides a list of resources that will be created, updated, or destroyed.

1. On the Home page, click the **More options** icon (![](/images/rean-platform-common/icon_more.PNG)) in the top-right corner and then click **Environments**.

2. On the Environment List page, click the appropriate environment.

3. From the version list, select the appropriate environment version.

4. To view the plan for a deployment, perform one of the following actions:

   | Goal                                                         | Action                                                       |
   | ------------------------------------------------------------ | ------------------------------------------------------------ |
   | To view the plan for a new deployment of the environment.    | Click the **Plan** icon (![](/images/rean-deploy/icon_envplan.PNG)) and select **Plan Environment**. |
   | To view the plan for an existing deployment of the environment. | Click the **Plan** icon (![](/images/rean-deploy/icon_envplan.PNG)) and select **Plan Selected Deployment**. |

   _**Note:** You can view the plan for an existing deployment that is shared with you only if your group has been given the **Redeploy** permission._

5. _(Optional)_ To view the plan with default values, click **QUICK PLAN**.

6. _(Only to view the plan for a new deployment)_ In the Review and Plan: *EnvironmentName* window, perform the following actions based on your requirements:

   - Edit the <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'connection'})" style="text-decoration:none">connection</a>, <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'provider'})" style="text-decoration:none">provider</a>, and AWS region that must be used for the plan.

     The connection, provider, and AWS region that is configured for the environment version is shown by default.

     _**Note:** If you select an AWS region for the plan, any predefined region in the provider is overwritten with the new AWS region._

   - To plan the deployment with a different environment version, from the **Environment Version** list, select that version.

   - In **Input Variables**, add input variables based on your requirements.

     These input variables are additional to the input variables that are already defined in the **Input Variables** resource in the selected environment version. If the same input variable is defined in both locations, the value specified while planning is given precedence.

     For information about the different ways in which you can define input variables, see <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'input-define-format'})" style="text-decoration:none">Formats for defining input variables</a>.

   - Under **Parent Deployments Mapping**, select a parent deployment for each **Depends On** resource from the corresponding list.

     Each list displays deployments of only the parent environment version that is selected in the **Depends On** resource.

     _**Note:** The **Parent Deployment Mapping** section is visible only if the environment has at least one **Depends On** resource._

   - _(Only if Chef Server is selected as the environment package type)_ Edit the Chef Server or Chef Environment that must be used for the plan.

7. _(Only to view the plan for an existing deployment)_ In the Review and Plan: *EnvironmentName* window, update the environment version, input variables, and parent deployments mapping based on your requirements.

8. Click **PLAN**.


_**Note:** In the case of a <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'layered-env'})" style="text-decoration:none">layered environment</a>, the plan for child deployments is available only if the parent deployments are available._ 

## <a id="redeploy" name="redeploy"></a>Redeploying existing deployments

You can redeploy an existing deployment with the same environment version. If required, you can also redeploy an existing deployment with a different environment version. In both cases, only the changes made in the selected environment version are implemented. Deployed resources that have not been updated in the selected environment version are not impacted.

1. On the Home page, click the **More options** icon (![](/images/rean-platform-common/icon_more.PNG)) in the top-right corner and then click **Environments**.

2. On the Environment List page, click the appropriate environment.

   The deployment name tab on the canvas displays the latest deployment of the selected environment version.

   ![](/images/rean-deploy/rd_deploymentnametab.PNG)

3. To view the list of deployments across all environment versions, click the deployments list on the canvas.

4. From the deployments list, click the deployment name that you want to redeploy.

5. Click the **Re-Deploy** icon (![](/images/rean-deploy/icon_envredeploy.PNG)) to open the Review and Deploy window.

   _**Note:** The **Re-Deploy** icon is available only if the environment version has been previously deployed._

6. _(Optional)_ On the **Environment** tab, perform the following actions based on your requirements:

   - From the **Connection** list, select the connection that you want to use to connect to all resources in the environment.

   - From the **Custom Tag** list, select the <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'tags'})" style="text-decoration:none">custom tag</a> that you want to assign to all resources in the environment.

      To view the key-pair values in the selected custom tag, hover over the ![](/images/rean-deploy/icon_public_env.PNG) icon.

7. _(Optional)_ On the **Deployment** tab, perform the following actions based on your requirements:

   - To redeploy with a different environment version, from the **Environment Version** list, select that version. 

     By default, the environment version that was originally deployed is selected.

   - In **Input Variables** , add or update the input variables based on your requirements.

     These input variables are additional to the input variables that are already defined in the **Input Variables** resource in the selected environment version. If the same input variable is defined in both locations, the value specified while redeploying is given precedence.

     For information about the different ways in which you can define input variables, see <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'input-define-format'})" style="text-decoration:none">Formats for defining input variables</a>.

   - Under **Parent Deployments Mapping**, select a parent deployment for each **Depends On** resource from the corresponding list.

     Each list displays deployments of only the parent environment version that is selected in the **Depends On** resource.

     _**Note:** The **Parent Deployment Mapping** section is visible only if the environment has at least one **Depends On** resource._

8. Select the Confirmation check box.

9. Click **Upgrade**. 

   If you have redeployed with a different environment version, the deployment is now associated with that version.

## <a id="deploy-share" name="deploy-share"></a>Sharing deployments

Deploy Accelerator enables you to collaborate with other users on your deployments of an environment. The ability to share deployments is useful when multiple users need to view or manage the same deployment. All these users can view, redeploy, destroy, or stop the deployment based on the permissions assigned to their group.

_**Important:** If you have upgraded from a version earlier than 2.9.0, and you later share any environment version that was created before the upgrade, all its deployments are also automatically shared with the specified groups. The permissions assigned for these deployments are based on the assigned permissions for the environment version. Based on your requirements, you can manually update the sharing permissions for the deployments._

**To share a deployment, perform the following actions:**

1. On the Home page, click the **More options** icon (![](/images/rean-platform-common/icon_more.PNG)) in the top-right corner and then click **Environments**.

2. On the Environment List page, click the environment whose deployment you want to share.

   _**Important:** Before you share deployments of an environment version with selected groups, ensure that the <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'collaboration'})" style="text-decoration:none">environment version is also shared</a> with those groups. Otherwise, users cannot view the shared deployments._

3. From the deployments list, click the deployment name that you want to share.

4. Click the **Share** icon (![](/images/rean-deploy/icon_share.PNG)) and select **Share Selected Deployment**.

   You can share a deployment when it is in the **Deploying**, **Deployed**, **Stopping**, or **Failed** state.

5. In the Share Deployment window, perform the following actions:

   - Click the **Share** icon (![](/images/rean-deploy/icon_sharegroup.PNG)) for the **Group** with which you want to share the deployment.

     _**Note:** You can view only the groups to which you belong. Only Cloud Accelerator Platform administrators can view all groups._ 

   - To assign permissions to users of the selected group, select the appropriate permission check boxes and click **DONE**.

     ![](/images/rean-deploy/rd_deploysharepermissions.PNG)

     _**Note:** You can select one or more permission check boxes for each group of users._

   - Read the warning message and perform one of the following actions:

     - If you want to proceed with sharing the deployment, select the Warning check box and click **SUBMIT**.

       The deployment is shared with all users who are members of the selected groups

     - If you no longer want to share the deployment, click **CANCEL**.

6. _(Optional)_ To enable users to redeploy the shared deployment by using the provider that is configured in that deployment, <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'share-provider'})" style="text-decoration:none">share the provider</a> with the same groups. 

7. _(Optional)_ To enable users to redeploy the shared deployment by using the connections that are configured in that deployment, <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'share-connection'})" style="text-decoration:none">share the connections</a> with the same groups.

_**Note:** In case of layered environments, ensure that you share both parent and child deployments with the same groups. You must assign at least the **View** permission for the parent deployments. Otherwise, users cannot redeploy the child deployment._

## <a id="destroy" name="destroy"></a>Destroying deployments

Each environment version can have multiple associated deployments, such as Staging and Production. You can destroy a deployment that is no longer required. This action ensures that you are not paying for resources that are not being used. Destroying a deployment deletes all the deployed resources that it contains. However, the environment version and its other deployments continue to be available. Typically, you destroy test, development, or other non-production deployments.<br>

_**Note:** You can destroy parent deployments only if their child deployments are already destroyed. Therefore, in the case of a <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'layered-env'})" style="text-decoration:none">layered environment</a>, you must destroy the deployments in a particular order. You must first destroy the child deployment in the lowest layer, then the deployment in the next layer, and so on until the parent deployment in the top layer._<br>

**To destroy a deployment, perform the following actions:**

1. On the Home page, click the **More options** icon (![](/images/rean-platform-common/icon_more.PNG)) in the top-right corner and then click **Environments**.

2. On the Environment List page, click the appropriate environment.

   The deployment name tab on the canvas displays the latest deployment of the selected environment version.

3. To view the list of deployments across all environment versions, click the deployment list on the canvas.

4. From the deployments list, click the deployment name that you want to destroy.

5. Click the **Destroy** icon (![](/images/rean-deploy/icon_envdestroy.PNG)).

   _**Note:** The **Destroy** icon is available only if the environment version has been previously deployed._

6. In the confirmation message box, type **Yes** and then click **SUBMIT**.

   After the deployment is destroyed, an email is sent to your registered email address and to the additional email address that might be configured for the deployment.

7. *(Optional)* To view the resource logs, click the **Logs** icon (![](/images/rean-deploy/icon_envlogs.PNG)).

   The **Logs** icon continues to be available until the deployment is successfully destroyed.

## <a id="version-release" name="version-release"></a>Releasing environment versions

After an environment version is finalized for production, you can choose to release that version. No changes can be made to a released version. 

1. On the Home page, click the **More options** icon (![](/images/rean-platform-common/icon_more.PNG)) in the top-right corner, and then click **Environments**.

2. On the Environment List page, click the appropriate environment.

3. From the version list on the canvas, select the environment version that you want to release.

4. From the version list, select **Release Version**.

5. In the confirmation message box, enter **Yes** and then click **SUBMIT**.

   You can no longer make any changes to the released version of an environment. However, you can <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'deploy'})" style="text-decoration:none">start new deployments</a> or <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'redeploy'})" style="text-decoration:none">redeploy existing deployments</a> with this released version.

## <a id="env-version" name="env-version"></a>Creating new environment versions

Each environment can have multiple versions. After an environment version is released, no changes can be made to that version. To add or update resources to the environment, you must create a new environment version.

1. On the Home page, click the **More options** icon (![](/images/rean-platform-common/icon_more.PNG)) in the top-right corner and then click **Environments**.

2. On the Environment List page, click the appropriate environment.

3. From the version list on the canvas, select the version on which you want to base the new environment version. 

4. From the version list, select **Create New Version**.

5. In the Create New Version From base version window, enter a unique version up to a maximum of 40 characters.

   The new version must be greater than the base version that you have selected. Alternatively, you can retain the base version and append it with a dash (-) followed by a custom alphanumeric value (for example, **02.10.18-updated**). Ensure that there is no space before the dash (-) and the custom value that you specify does not contain a colon (:).

6. _(Optional)_ To not apply share permissions from the base environment to the new environment version, clear the **Use share permission from base environment** check box.

   By default, share permissions configured for the base environment are applied to the new environment version.

7. Click **CREATE**.

   ![](/images/rean-deploy/rd_create-env-version.PNG)

   A new version of the environment appears on the canvas. This version also appears on the Environment List page and in the **Search Environments** box.

8. _(Optional)_ In the new environment version, add or modify <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'resource'})" style="text-decoration:none">resources</a> and <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'packages'})" style="text-decoration:none">packages</a> based on your requirements.

9. _(Optional)_ <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'config'})" style="text-decoration:none">Update the description and configure additional settings</a> for the environment version based on your requirements.

   When you are ready to create the infrastructure that you have designed in the new environment version, you can <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'deploy'})" style="text-decoration:none">start a new deployment</a> or <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'redeploy'})" style="text-decoration:none">redeploy an existing deployment</a> with this version.

## <a id="provider-version" name="provider-version"></a>Upgrading the provider version of environments

Deploy Accelerator uses Terraform providers to create, manage, and update resources in AWS, Azure, Google Cloud Platform, and other supported providers. When you create a new environment or a new version of an existing environment, resources are created based on the most recent provider version that is supported in Deploy Accelerator.<br>

When you open an environment whose provider version has been automatically upgraded, the Provider Version Upgraded Changes window appears. For each resource in the environment, it lists the attributes that are deprecated or cannot be upgraded. The resources that require user action are marked in red. The resources for which Deploy Accelerator has automatically performed the changes are marked in green.

![](/images/rean-deploy/resource.png)

To acknowledge the upgrade changes, click the Confirmation checkbox, and click CONFIRM. However, the list of provider upgrade changes will not be shown after you submit your acknowledgement.

To retain the list of provider upgrade changes for some time, you can click CLOSE. To reopen the window, click **Provider upgrade changes** on the canvas.

![](/images/rean-deploy/prov.png)

***Important***: *If the upgrade changes are not acknowledged, the Provider Version Upgraded Changes window appears while deploying the environment. If the upgrade changes are acknowledged but the manual changes are not made to the resources, you will see an error in the deployment log file.*

## <a id="blueprintview" name="blueprintview"></a>Viewing dependency between environments

The Environment Dependency View enables you to view the dependency of an environment on other environments (parent environments). You can also view other environments (child environments) that are dependent on an environment. If the environment has deployments, this view displays the parent or child deployments of the selected deployment.

1. On the Home page, click the **More options** icon (![](/images/rean-platform-common/icon_more.PNG)) in the top-right corner and then click **Environments**.

2. On the Environment List page, click the appropriate environment.

   If the selected environment has deployments, the deployment list on the canvas displays the latest deployment of the selected environment version.

3. Click the **Environment Dependency View** icon (![](/images/rean-deploy/icon_blueprintview.PNG)).

   The Environment Dependency View window appears, as shown in the following image:

   ![](/images/rean-deploy/blueprint_view.PNG)

   If the environment has a deployment, the Environment Dependency window displays the connection between the selected deployment and its parent or child deployments. The color of the deployment represents its current state. For example, black indicates Not Started, orange indicates Running, green indicates Deployed, and red indicates Failed.

4. Click the toggle switch to see the dependent parent and child environment(s). 

   If the toggle switch is towards Child, the Environment Dependency window displays the connection between the current environment and its child environment(s). 

   If the toggle switch is towards Parent, the Environment Dependency window displays the connection between the current environment and its parent environment(s). 

5. *(Optional)* To switch to another environment or deployment shown in the Environment Dependency View window, select that environment or deployment name.

## <a id="tags" name="tags"></a>Configuring custom tags

You can define tags for individual resources in an environment but this process is repetitive and time consuming. Deploy Accelerator simplifies the process of adding common tags to all resources in an environment. You can create a custom tag, which contains a set of AWS key-pair tags, and attach the custom tag to an environment. Deploy Accelerator attaches this custom tag to all resources in the environment.<br>

For example, to control access to AWS resources in an environment, you can assign tags to the resources. AWS IAM policies can leverage resource tags to define the resources that users can access.<br>

**To configure a custom tag, perform the following actions:**

1. On the Home page, click the **More options** icon (![](/images/rean-platform-common/icon_more.PNG)) in the top-right corner and then click **Custom Tags**.

2. Under **Custom Tag**, click **NEW**.

3. Enter the custom tag name and description.

4. Under **Tags**, define the tags that you want to assign to all resources in the environment. 

   The following image shows an example of how you must specify tags for your resources.

   ![](/images/rean-deploy/rd_customtag.PNG)

   _**Note:** Tag values for all the resources that have tag support in your environment are set to the default values from the tags defined in the selected custom tag._

5. Click **SAVE**.

   A new custom tag appears under the **Custom Tag List** section.

   _**Note:** You can also add tags to a resource by setting the **tags** attribute in the RESOURCE panel. If users select a custom tag for an environment and specify values in the **tags** attribute of a resource in that environment, Deploy Accelerator attaches both the custom tag and resource-level tag values to the resource. However, if the same tag is defined in both locations, precedence is given to the resource-level tag value._

## <a id="compare" name="compare"></a>Comparing differences between environments

Deploy Accelerator enables you to compare differences between two environments or two versions of the same environment. Comparing two versions of the same environment helps you to track changes to an environment over time. Comparing environments is also useful when you have two similar environments and you want to retain only one of them. You can compare the differences between these environments, ensure that one of the environments has all the required resources and packages, and then delete the other environment.<br>

The comparison detects the following differences between the base and target environments.

| Comparison                                 | Details                                                      |
| ------------------------------------------ | ------------------------------------------------------------ |
| Environment configuration-level comparison | This comparison displays a list of configuration details that have changed in the target environment version:<br>-- Connection, provider, region, and environment package type<br>-- Chef server and Chef environment<br>-- Environment owner<br>-- Custom tag<br>-- Released status<br>-- Notification email address and email templates<br>-- Deploy and Destroy pre-scripts, post-scripts, and destroy after interval |
| Resource-level comparison                  | This comparison displays a list of resources that are added, edited, or removed in the target environment version.<br><br>For each edited resource, you can see a list of attributes and packages that are added, edited, or removed. If a package has been edited, you can also see the differences in the package attributes. |

**To compare differences between environments, perform the following actions:**

1. On the canvas, click the **More** icon (![](/images/rean-deploy/icon_more_bar.PNG)) and then click **Compare**.

   The environment version that is currently selected is considered as the **Base Environment** for comparison.

2. _(Optional)_ In the Compare Resources and Packages window, from the **Base Environment** and **Version** lists, select a different environment and environment version.

   You can identify environment versions that are shared with you based on the color of the environment version. 

3. From the **Target Environment** and **Version** lists, select the environment and environment version with which you want compare the base environment.

   The **RESOURCES** tab is selected by default. In the **Resources** panel, you can see a list of resources that are added, edited, or removed in the target environment. To help you identify the changes, the resources are highlighted in different colors, as shown in the following table. 

   | Highlighted color | Meaning          |
   | ----------------- | ---------------- |
   | Green             | Added resource   |
   | Red               | Deleted resource |
   | Blue              | Edited resource  |

4. To see the resource-level comparison, click an edited resource in the **Resources** panel.

   On the **RESOURCE ATTRIBUTES** and **PACKAGES** tabs, you can see the differences in attribute values and packages. Green background color indicates added content while red background color indicates deleted content.

   ![](/images/rean-deploy/rd_compare.PNG)

5. To see the environment configuration-level comparison, click the **CONFIGURATION** tab.

   On the **ATTRIBUTES** tab, you can see a list of configuration details that have changed in the target environment. Green background color indicates added content while red background color indicates deleted content.

   ![](/images/rean-deploy/rd_compare_envconfig.PNG)

6. Click **CLOSE**.

## <a id="env-search" name="env-search"></a>Searching environments

1. On the Home page, click the **More options** icon (![](/images/rean-platform-common/icon_more.PNG)) in the top right corner and then click **Environments**.

2. On the Environment List page, in the Search Environment tab, enter a search string to find an environment.

   The search string filters the environments and displays results with the string. The search string filters environments across all columns on the Environment List page.

## <a id="env-rename" name="env-rename"></a>Renaming environments

1. On the Home page, click the **More options** icon (![](/images/rean-platform-common/icon_more.PNG)) in the top right corner and then click **Environments**.

2. On the Environment List page, click the environment that you want to rename.

3. On the canvas, click the **More** icon (![](/images/rean-deploy/icon_more_bar.PNG)) and then click **Rename**.

   ![](/images/rean-deploy/rd_rename.PNG)

4. In the Rename Environment window, enter a unique name for the environment and click **SUBMIT**.

   All versions of the environment are renamed.

   You can see the updated environment name in the Search Environment box, Environment List page, and all other instances. The environment name is also updated in any child environments that reference this environment.

   _**Note:** You can rename an environment that has been shared with you only if the root environment version is shared with the **Edit** permission. Otherwise an error message is shown when you click **SUBMIT**._

## <a id="collaboration" name="collaboration"></a>Sharing environments

Deploy Accelerator enables you to collaborate with other users on an environment. The ability to share environments is useful when multiple users need permissions to perform different tasks such as edit, deploy, destroy, delete, view, and export on the same environment. All these users can work and collaborate on a shared environment at the same time. Users can perform one or more tasks based on the permissions assigned to their group.

1. On the Home page, click the **More options** icon (![](/images/rean-platform-common/icon_more.PNG)) in the top right corner and then click **Environments**.

2. On the Environment List page, click the environment that you want to share with other users.

3. Click the **Share** icon (![](/images/rean-deploy/icon_share.PNG)) and select **Share Environment**.

4. In the Share Environment window, perform the following actions:

   - _(Optional)_ To share all existing versions of the environment with other users, select **Share All Versions**.

      By default, only the currently selected environment version is shared with other users.

      _**Note:** If you later <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'env-version'})" style="text-decoration:none">create a new version of this environment</a>, you must separately share that environment version with users. While creating the new version, you can choose to apply the share permissions from the base environment._

   - Click the ![](/images/rean-deploy/icon_sharegroup.PNG) icon for the **Group** with which you want to share the environment version. 

      _**Note:** You can view only the groups to which you belong. Only Cloud Accelerator Platform administrators can view all groups._ 

      ![](/images/rean-deploy/rd_envsharegroups.PNG)

   - To assign share permissions to users, select the appropriate permission check boxes and click **DONE**.

      ![](/images/rean-deploy/rd_envsharepermissions.PNG)

      You can select one or more permission check boxes for each group of users.

   - Read the warning message and perform one of the following actions:

      - If you want to proceed with sharing the environment, select the Warning check box and click **SUBMIT**.

         The environment version is shared with all users who are members of the selected groups.

         When you share an environment version, its deployments are not automatically shared with the specified groups. You must separately <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'deploy-share'})" style="text-decoration:none">share each deployment</a> with the appropriate groups and assign the required permissions.

      - If you no longer want to share the environment, click **CANCEL**.

      _**Important:** If you have upgraded from a version earlier than 2.9.0, and you later share any environment version that was created before the upgrade, all its deployments are also automatically shared with the specified groups. The permissions assigned for these deployments are based on the assigned permissions for the environment version. Based on your requirements, you can manually update the sharing permissions for these deployments._

5. _(Optional)_ To enable users to start a deployment of the shared environment version by using the provider that is configured in that version, <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'share-provider'})" style="text-decoration:none">share the provider</a> with the same groups.

6. _(Optional)_ To enable users to successfully use the connections that are specified in the shared environment version, <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'share-connection'})" style="text-decoration:none">share the connections</a> with the same groups.

## <a id="delete" name="delete"></a>Deleting environments

You can choose to delete environments that you no longer need. If an environment has multiple versions, each version must be separately deleted. Deleting an environment version also permanently deletes all configurations related to that version.

1. On the Home page, in the **Search Environment** box, enter the name of the environment that you want to delete.

   If the environment has multiple versions, each version is listed separately in the **Search Environment** box. You can identify environments that have been shared with you based on the color of the environment name.

2. Next to the environment version that you want to delete, click the **Delete** icon  (![](/images/rean-deploy/icon_envdelete.PNG)). 

3. In the confirmation message box, click **YES**.

   The environment version is no longer shown in the list of environments.

_**Note:** You cannot delete environment versions that have deployments. Similarly, you cannot delete an environment version that is being used as a parent in one or more child environments._

## <a id="restore" name="restore"></a>Restoring deleted environments

You can restore a deleted environment which was deleted by you, or the environments for which you have the Delete permission.

1. On the Home page, click the **More options** (![](/images/rean-platform-common/icon_more.PNG)) icon in the top right corner and then click **Environments**.

2. In the **Environment List**, select **Show Deleted Environments**.
   The deleted environments appear at the end of the list.
   ![](/images/rean-deploy/delete_restore.PNG)

3. Under the **Actions** column, click **Restore** to restore the environment. 

4. In the confirmation message box, click **YES**.

   The environment is restored in the list of environments.

## <a id="access-env" name="access-env"></a>Accessing environments and deployments of other users

By default, Deploy Accelerator allows you to access only the following environments and deployments:

- Environments and deployments that you own.

  For more information, see <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'environments'})" style="text-decoration:none">Creating environments</a> and <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'deploy'})" style="text-decoration:none">Starting new deployments</a>.

- Environments and deployments that other users have shared with you.

  For more information, see <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'collaboration'})" style="text-decoration:none">Sharing environments</a> and <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'deploy-share'})" style="text-decoration:none">Sharing deployments</a>.

However, sometimes you might need to access the environments and deployments of other users even though they are not shared with you. Your administrator can grant you this ability by adding you to the **VIEW_ALL_USER'S_ENTITIES** group. This group allows you to view all environments and deployments of all users in Deploy Accelerator. 

_**Note:** To perform any actions (such as delete environments and destroy deployments) on the entities of other users, you must also be a member of the **ADMIN** group._

**To access environments and deployments of other users, perform the following actions:**

1. To access an environment or a deployment of another user, ensure that you have the ID of the environment version.

   _**Note:** When an environment version is opened on the canvas, its ID is shown in the URL._ 

2. Open a browser and enter the Deploy Accelerator URL in the following format:

   **https://*YOUR-PLATFORM-BASE-URL*/hcapdeploy/#/home/dnow/*ENVIRONMENT-VERSION-ID***  

3. To view the list of all deployments across all versions of the environment, click the deployment tab on the canvas.

4. Select the deployment that you want to view.

## <a id="export-blueprint" name="export-blueprint"></a>Exporting environments as blueprints

If you create a standalone or layered environment that needs to be deployed multiple times, you can export that environment as a blueprint. Ensure that you have followed the <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'bp-tips'})" style="text-decoration:none">best practices for creating blueprints</a>.<br>

If you are exporting a layered environment, also ensure that you export the child environment that is in the lowest layer. This action ensures that parent environments in all other layers are also included in the blueprint.<br>

You can also export multiple environments. To export multiple environments, you can select a child environment and all the parent environments in the hierarchy are automatically included.

**<a name="blueprint-example"></a>Example of exporting a layered environment**<br>

Consider a scenario in which you create a Jenkins environment and an APP-VPC environment that is dependent on the Jenkins environment. You then create environments for different applications - Hitachi Cloud Accelerator Platform - Test (Test Accelerator), Hitachi Cloud Accelerator Platform - Dashboard (Dashboard Accelerator), and Hitachi Cloud Accelerator - Repair. Each of these environments has a dependency on the APP-VPC environment, as shown in the following image:

![](/images/rean-deploy/blueprint_impexp_scenario.png)

When you export one of the application environments as a blueprint, the Jenkins and APP-VPC environments are also included in the blueprint and the dependency between them is retained.<br>

To replicate the application environment that you have exported, you can <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'custom-blueprint'})" style="text-decoration:none">create new environments from the blueprint</a>, make customizations if required, and then <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'deploy'})" style="text-decoration:none">start a deployment</a> of the environments.<br>

**To export an environment as a blueprint, perform the following actions:**

1. On the canvas, click the **More Options** icon (![](/images/rean-deploy/icon_more_bar.PNG)) and then click **Export**.

2. In the **Environment Export** window, from the list select the environment(s) to export. 

   The environment which is open on the canvas is selected by default. The environments created by you are listed in black color. The environments that other users have shared with you are listed in a different color.

   **Important:** If you select a child environment, all its parent environments are also included in the exported file. 

   ![](/images/rean-deploy/export.PNG)

3. To filter a long list of environments, enter the search keywords in the **Search Environments** box.

4. Enter a name for the blueprint. 

5. Select the warning checkbox to acknowledge the warning message, and click **EXPORT**. 

   A JSON file is saved as ***fileName*.blueprint.reandeploy** to your local computer. In this JSON file, the environments, the resources within each environment, and the packages within each resource are alphabetically sorted. The packages that are listed after the environments are also alphabetically sorted.

## <a id="bp-tips" name="bp-tips"></a>Best practices for creating blueprints

Consider the following best practices while creating environments that you want to export as blueprints:

- Blueprints must ideally use a layered environment. You should create an environment with network resources, such as VPCs and CIDRs. In all other environments within the blueprint, you should get the VPC IDs, CIDRs, and other infrastructure resources from this environment by using the **Depends On** resource.

- The name of the **Depends On** resource in each environment must ideally indicate the environment on which there is a dependency. For example, **depends_on_app_vpc**.

- Blueprints must enable users to change resource attribute values by using input variables.

- Blueprints must output important information, such as Server URLs and IDs of important resources, to outputs.

- Blueprints must use name attributes that are descriptive and unique.

  For example, you must use **${var.environment_name}-myserver** instead of **myserver**.

- Blueprints must not hard-code critical things, such as AWS regions, account IDs, VPCs, owner information, product information, environment information, buckets, user names, and passwords.

- <a name="data-sources"></a>For things that should be automatically detected, blueprints must use Terraform data sources instead of input variables.

  The following table lists a few examples of data sources that you can use in your environment. To know all the data sources that you can add to your environment, see the **Data Sources** section on the **Resources** tab in the left panel on the Deploy Accelerator Home page. 

  | Goal                                                         | Data source             | Usage                                  |
  | ------------------------------------------------------------ | ----------------------- | -------------------------------------- |
  | Get the current AWS Account ID                               | aws_caller_identity     | ${*DataSourceName*.current.account_id} |
  | Get the name of the current region                           | aws_region              | ${*DataSourceName*.current.name}       |
  | Get the current partition and use it    to build an Amazon Resource Name (ARN) | aws_partition           | ${*DataSourceName*.current.partition}  |
  | Get a list of availability zones                             | aws_availability_zones  | ${*DataSourceName*.available.names}    |
  | Get the current Elastic Load Balancer (ELB) service account ID and use it in the bucket policy for ELB logs | aws_elb_service_account | ${*DataSourceName*.current}            |

## <a id="bp-gallery" name="bp-gallery"></a>Adding blueprints in the Blueprint Gallery

If you have created an environment that needs to be replicated multiple times by different users, you can export that environment as a blueprint and then add the blueprint in the Blueprint Gallery. Users can then create a new environment by <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'oob-blueprint'})" style="text-decoration:none">importing that blueprint from the Blueprint Gallery</a>.

**Before you begin**

- Ensure that you can access the Artifactory that is configured for Deploy Accelerator. In the Artifactory, ensure that you can access the repository that the Administrator has configured for storing the blueprints that are displayed in the Blueprint Gallery.
- <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'bp-tips'})" style="text-decoration:none">Export your environment as a blueprint</a>.

**To add a blueprint in the Blueprint Gallery, perform the following actions:**

1. Create additional files that are required for the blueprint.

   - Create a **metadata.yml** file for the blueprint. This file must contain the attributes that are listed in the following table.

     | Attribute                                  | Details                                                      |
     | ------------------------------------------ | ------------------------------------------------------------ |
     | name                                       | The blueprint name specified in this file is shown in the Blueprint Gallery.<br><br>Ensure that the blueprint name in this file matches the actual file name of the blueprint (which you provided while exporting the environment as a blueprint from Deploy Accelerator).<br><br>For example, if you exported an environment from Deploy Accelerator as **Chef-Server-HA**, the blueprint file name is **Chef-Server-HA.blueprint.reandeploy** and the name that you must specify in the **metadata.yml** file must be **Chef-Server-HA**. |
     | description                                | The blueprint description specified in this file is shown in the Blueprint Gallery. |
     | version                                    | The blueprint version specified in this file is shown in the Blueprint Gallery. |
     | <a id="bp-image" name="bp-image"></a>image | To display an image for the blueprint version in the Blueprint Gallery, specify that image in this file and add the image file in the **images** folder that you will create in a later step.<br><br>You must specify the image path relative to the *BlueprintName* and *Version* folder in the Artifactory. For example: **images/chef.png**<br><br>The image must be in the PNG format. Also, it is recommended that the image dimensions are 130 x 40 pixels.<br><br>_**Note:** If you later want to update the image for a blueprint version, it is recommended that you use a different image file name and update the **metadata.yml** file. If you just replace the image file with the same name in the **images** folder, the updated image is not shown in the Blueprint Gallery._ |
     | ownerName                                  | The owner name specified in this file is shown in the Blueprint Gallery. If you add this attribute in the file but do not specify a value, **admin** is shown as the owner of this blueprint.<br><br>**ownerName** is an optional attribute. |
     | ownerEmail                                 | The owner email specified in this file is shown in the Blueprint Gallery.<br><br>**ownerEmail** is an optional attribute. |

     The following image shows an example of a **metadata.yml** file.

     ![](/images/rean-deploy/bpgallery-metadata.PNG)

   - _(Optional)_ Create a **README.md** file for the blueprint. 

     This file (Markdown format) should ideally include information such as deployment architecture, details about input and output variables used in the environment, and any dependencies.

     To add an image in the **README.md** file, you must add the image file in the **images** folder that you will create in the next step. Also, you must use the **IMAGE_BASE_PATH** prefix for the image path in the **README.md** file, as shown in the example below:

     **IMAGE_BASE_PATH/images/chef.png**

   - _(Optional)_ Create an **images** folder and add the image that you want to show for the blueprint version in the Blueprint Gallery. Also, add any images that are used in the **README.md** file in this folder.  

2. Add the blueprint in the Blueprint Gallery.

   - Sign in to the Artifactory that is configured for Deploy Accelerator.

   - Navigate to the repository in which the blueprints must be stored.

   - Create a folder with the same name as the blueprint file name (for example: Chef-Server-HA).

     _**Important:** The blueprint is displayed in the Blueprint Gallery only if the folder name, blueprint file name, and the blueprint name defined in the **metadata.yml** file are the same._

   - In the *BlueprintName* folder, create a folder with the blueprint version (for example: 01.00.00). 

     Ensure that the folder name matches the blueprint version that is defined in the **metadata.yml** file.

   - In the version folder, add the following files and folder:

     - **metadata.yml** file
     - ***BlueprintName*.blueprint.reandeploy** file
     - _(Optional)_ **README.md** file
     - _(Optional)_ **images** folder

3. Verify that the blueprint is available in the Blueprint Gallery and can be successfully imported and deployed.

   - <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-platform-common', viewPage: 'createAndAccessAccount', viewSection: 'logon'})" style="text-decoration:none">Sign in to Cloud Accelerator Platform</a>.

   - On the Home page, click the **More options** icon (![](/images/rean-platform-common/icon_more.PNG)) in the top-right corner and then click **Blueprint Gallery**.

   - On the Blueprint Gallery page, search for the blueprint that you have just added in the Artifactory.

   - _(Optional)_ If you cannot see your blueprint in the Blueprint Gallery, perform the following actions:

     - Click **Sync Blueprint**.

     - In the confirmation message box, click **YES**.

       It might take a few minutes to sync the blueprint metadata from the Artifactory. This metadata includes the blueprint name, description, version, and image.

     - Refresh the browser after a few minutes.

     _**Note:** By default, the Blueprint Gallery is automatically refreshed every 30 minutes. However, your administrator might have configured a different sync interval based on requirements._ 

   - Confirm that the name, description, version, and image of your blueprint are displayed correctly.

   - <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'ooo-blueprint'})" style="text-decoration:none">Import the blueprint</a> and <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'deploy'})" style="text-decoration:none">start a new deployment</a>.

## <a id="rd-resources" name="rd-resources"></a>Deploy Accelerator resources

The **Resources** tab displays many resources that you can add to your environment. The following table lists the additional resources that Deploy Accelerator provides to address <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'resource-scenarios'})" style="text-decoration:none">specific scenarios</a>:

| Resource name                                                | Details                                                      |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| <a id="dependson-resource" name="dependson-resource"></a>Depends On | Use this resource to create a dependency on another environment. The name of the **Depends On** resource must ideally indicate the environment on which there is a dependency.<br><br>In the **reference_type** attribute, you can select either **Environment Name** or **S3**.<br><br>-- If you select **Environment Name**, click the **Depends On** box and select the parent environment version on which the environment must be dependent.<br>The selected parent environment appears in the _environmentName:environmentVersion_ format (for example: networkEnv:01.00.00). While exporting the child environment, Deploy Accelerator exports this version of the parent environment.<br><br>-- If you select **S3**, enter the S3 bucket name and the remote state file name of the environment that is referred by the **Depends On** resource.<br>For example: **s3://bucket_name/tfstatefile_name**, in which **bucket_name** is the name of the S3 bucket and **tfstatefile_name** is the Terraform remote state file name of the environment that is to be referred.<br>If required, you can define variables for the S3 bucket and Terraform state file names in the **Input Variables** resource. To reference these variables in the **Depends On** resource, you must use the following interpolation syntax:<br>**s3://${var.*bucketNameInputVariable*}/${var.*tfstateFileNameInputVariable*}**<br>For example: If you have defined the **S3bucket** and **tfstatefile** variables in the **Input Variables** resource, specify the following URL in the **Depends On** resource.<br>**s3://${var.s3bucket}/${var.tfstatefile}**<br>Ensure that the provider that you use to deploy the environment has the appropriate access to the S3 bucket that you have specified.<br><br>_**Note:** For information about how you can create <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'layered-env'})" style="text-decoration:none">layered environments</a> by using the **Depends On** resource, see <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'create-layered-env'})" style="text-decoration:none">Creating layered environments</a>._ |
| Input Variable                                               | Use this resource to create a JSON file in which you can specify multiple variables and set their values. You can later use these variables in other resources within the same environment.<br><br>For information about the different ways in which you can define and use input variables, see <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'input-define-format'})" style="text-decoration:none">Formats for defining input variables</a> and <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'input-use-format'})" style="text-decoration:none">Formats for using input variables in resources</a>. |
| Locals                                                       | Use this resource to create a JSON file in which you can specify multiple local values. You can later use these local values in other resources within the same environment.<br><br>A local value can be a simple constant or a complex expression that transforms or combines values from other resources in the environment, as shown in the following example.<br>![](/images/rean-deploy/locals_example.PNG)<br><br>For more information, see the [Terraform documentation](<https://www.terraform.io/docs/configuration-0-11/locals.html>). |
| Output                                                       | Use this resource to create a JSON file in which you can specify multiple variables that can be used in other dependent environments.<br><br>The value of these variables can reference either variables defined in the **Input Variable** resource or attributes of other resources in the environment by using the interpolation syntax.<br><br>_**Note:** If you do not want to display an output value in the resource logs of an environment, set the **sensitive** parameter for that output to **true**._ |
| Existing VM                                                  | Use this resource to add an existing instance to the environment. |

### <a id="input-define-format" name="input-define-format"></a>Formats for defining input variables

In the **Input Variable** resource, you can use the following formats to define input variables based on your requirements:

- **String:** Use the following syntax to define input variables by using the String format:

  ```
  "string_input": {
      "type": "string",
      "default": "sample_value",
      "description": "this is sample string value for hcap deploy"
    }
  ```

  Example:

  ```
  "string_input": {
      "type": "string",
      "first_name": "John",
      "description": "First name of the user"
    }
  ```

- **List:** Use the following syntax to define input variables by using the List format:

  ```
   "list_input": {
      "type": "list",
      "default": [
        "sample_value1",
        "sample_value2"
      ],
      "description": "this is sample list value for hcap deploy"
    }
  ```

  Example:

  ```
   "list_input": {
      "type": "list",
      "Region": [
        "us-west-2",
        "us-east-1"
      ],
      "description": "List of regions to be used"
    }
  ```

- **Map:** Use the following syntax to define input variables by using the Map format:

  ```
  "map_input": {
      "type": "map",
      "default": {
        "key": "sample_value"
      },
      "description": "this is sample map value for hcap deploy"
    }
  ```
  

Example:

```
  "map_input": {
      "type": "map",
       "ec2details": {
          "app": {
              "ami": "ami-718c6909",
              "type": "t2.micro"
       		 	},
      },
      "description": "this is sample map value for hcap deploy"
    }
```

The following image shows an example of using these different formats in the **Input Variable** resource.

![](/images/rean-deploy/rd_inputvariable_formats.PNG)

### <a id="input-use-format" name="input-use-format"></a>Formats for using input variables in resources

In any environment, instead of hard coding the attribute value of a resource, you can use the interpolation syntax to refer to the input variables that you have defined. The interpolation syntax is based on the type of input variable that you are referring.

- **String:** Use the following interpolation syntax to refer to an input variable of the String type:

  ```
  ${var.variableName}
  ```

  **Example:**

  ```
  ${var.string_input}
  ```

  **List:** Use the following interpolation syntax to refer to an input variable of the List type:

  To refer to all the values in a list, use the following syntax:

  ```
  ${var.variableName}
  ```

  To refer to a specific value in a list, use the following syntax:

  ```
  ${var.variableName[index]}
  ```

  Examples:

  ```
  ${var.list_input}
  ```

  ```
  ${var.list_input[0]}
  ```

- **Map:** Use one of the following interpolation syntax to refer to an input variable of the Map type:

  ```
  ${var.variableName}
  ```
  
  ```
  ${var.variableName["Key"]}
  ```

	```
	${lookup(var.variableName["Key"], "InnerKey")}
	```
	
	Examples:
	
	```
	${var.map_input}
	```
	
	```
	${var.map_input["ec2details"]}
	```
	
	```
	${lookup(var.map_input["ec2details"], "app"}
	```

## <a id="resource-copy" name="resource-copy"></a>Copying resources

You can copy one or more existing resources from either the same environment or a different environment.

1. On the Home page, click the **More options** icon (![](/images/rean-platform-common/icon_more.PNG)) in the top-right corner and then click **Environments**.

2. On the Environment List page, click the environment from which you want to copy a resource.

3. On the canvas, right-click the resource that you want to copy, and click **Copy**.

    ![](/images/rean-deploy/rd_resourcecopy.PNG) 

    To copy multiple resources, repeat this step for each resource.


4. Based on your requirements, perform one of the following actions:

   - To create a copy of the resource in the same environment, right-click the canvas and then select the resource from the **Paste Resource** list.
   - To create a copy of the resource in another environment, open that environment in a new tab, right-click the canvas and then select the resource from the **Paste Resource** list.

   All the resources that you have copied appear in the **Paste Resource** list. You can add a copied resource to any environment only once.

    ![](/images/rean-deploy/rd_resourcepaste.PNG)

5. From the **Paste Resource** list, click the appropriate resource and then perform the following actions:

   - In the Resource Name window, enter a name for the resource and click **CREATE**.

     In the right panel that opens, on the **Resource** tab, you can see that the attribute values are the same as the original resource that you have copied. However, the name attribute value and tags are not copied to the new resource. The **Packages** tab also displays the same packages, along with their attributes, as the original resource.

   - On the **Resource** tab, add or update the attribute values based on your requirements.

     _**Important:** If you have copied a resource from another environment, you must update attribute values that use the interpolation syntax to reference input variables or other resources. You must also update the **Depends On** attribute if it references another resource in the original environment. Otherwise, the new resource might not be successfully deployed._

   - _(Optional)_ On the **Packages** tab, add or remove packages based on your requirements.

   _**Note:** After you select a copied resource from the **Paste Resource** list, it no longer appears in the list._

6. _(Optional)_ Repeat step 5 for the other resources in the **Paste Resource** list.

7. _(Optional)_ To clear all resources from the **Paste Resource** list, click **clearAll**.

8. To save the environment, click the **Save** icon (![](/images/rean-deploy/icon_envsave.PNG)).

## <a id="resource-rename" name="resource-rename"></a>Renaming resources 

1. On the Home page, click the **More options** icon (![](/images/rean-platform-common/icon_more.PNG)) in the top-right corner and then click **Environments**.

2. On the Environment List page, click the appropriate environment version.

3. On the canvas, select the resource that you want to rename.

4. In the right panel that opens, on the **Resource** tab, click the resource name link at the top.

   ![](/images/rean-deploy/instance_edit.PNG)

5. In the Resource Name window, update the resource name and click **SAVE**.

   The resource name is automatically updated in other resources within the environment that reference it by using either the interpolation syntax or the **Depends On** attribute.

6. To save the environment, click the **Save** icon (![](/images/rean-deploy/icon_envsave.PNG)).

_**Important:** If you rename a deployed resource, that resource is destroyed and a new resource is created with the updated name when you redeploy existing deployments. Also, until you redeploy the deployments, the deployed icon is not shown on the resource and the deployed values are not shown on the **Resource Details** tab._

## <a id="user-package" name="user-package"></a>Adding user-defined packages

Packages in Deploy Accelerator enable you to leverage your existing infrastructure automation tool (Chef Solo, Chef Server, Ansible Solo, or Puppet) to configure compute resources in your environments. Each package definition includes the infrastructure automation tool and the Chef cookbook or Puppet module or manifest file that Deploy Accelerator must use to configure the compute resource.<br>

Managed packages are available by default after Deploy Accelerator is successfully deployed. You can leverage these managed packages if they meet your requirements. Otherwise, you can add your own custom (or user-defined) packages. In the case of user-defined packages, you must define a versioning scheme for the packages and ensure that each combination of package type, name, and version is unique.<br>

The following diagram describes the high-level process for creating and releasing a user-defined package:

![](/images/rean-deploy/rd_packageversion.PNG)

After a user-defined package is released, you can neither edit nor delete that package. To include additional updates, you must create a new package version.

#### <a id="custom-puppet" name="custom-puppet"></a>Add a user-defined Chef, Ansible, or Puppet package

1. To prepare the user-defined package that you want to add in Deploy Accelerator, perform the following actions:

   - Based on your infrastructure automation tool, perform one of the following actions:

      - Create a Chef cookbook and test it well using the chef-client. For more information, see the [Chef documentation](https://docs.chef.io/).
      - Create an Ansible playbook and test it well using the Ansible-client. For more information, see the [Ansible documentation](https://docs.ansible.com/ansible/latest/index.html).
      - Create a Puppet module or manifest file and test it well using the puppet-agent. For more information, see the [Puppet documentation](https://docs.puppet.com/).

   - Create a ZIP file of the Chef cookbook, Ansible playbook, Puppet module, or Puppet manifest file in the **tar.gz** format.

   - Commit the ZIP file (tar.gz format) in GitHub, GitLab, Artifactory, or any other repository. You can use a public repository for open source software.

      _**Important:** If Deploy Accelerator is deployed in the offline mode, you must commit the Chef Solo cookbook, Ansible playbook, Puppet module, or Puppet manifest file in the Artifactory._

   - Decide the attributes that you want to define for this package.

2. On the Home page, click the **More options** icon (![](/images/rean-platform-common/icon_more.PNG)) in the top-right corner and then click **Packages**.

   ![](/images/rean-deploy/rd_packagelist.PNG)

   On the Package List page, the **Package Type** column enables you to identify the package type. In case of Chef Server packages, the **Chef Server** column enables you to identify the Chef Server from which the packages are shown.

3. To add a user-defined package, click **ADD**.

4. On the Add Package page, perform the following actions:

   - On the **Basic** tab, enter the following details:

     | Field           | Details                                                      |
     | --------------- | ------------------------------------------------------------ |
     | Package Name    | Enter the name of the package. This name appears on the **Packages** tab on the Home page.<br><br>The name that you enter must be unique across all packages of that type. However, if you are adding a new version of an existing package, ensure that the package name is the same as the existing package name.<br><br>_**Note:** You cannot enter a name that matches a managed package._ |
     | Package Type    | Select **chef** or **ansible** as the package type. Depending on the option selected here the package is listed, under the **Packages** tab, in the **Private Packages** list. |
     | Package Version | Enter the version of the package based on your own versioning scheme. The value of this field must be unique across all existing versions of the package that you are adding.<br><br>_**Note:** Each combination of package type, name, and version must be unique._ |
     | Description     | Enter details about the package.                             |
     | Image Url       | Enter the URL from which Deploy Accelerator must download the image file that is shown on the **Packages** tab on the Home page. |

   - On the **Repository** tab, enter the following details for the repository where the Chef Solo cookbook, Ansible playbook, Puppet module, or Puppet manifest file is located:

     | Fields             | Details                                                      |
     | ------------------ | ------------------------------------------------------------ |
     | Download URL       | Enter the URL from which Deploy Accelerator must download the Chef Solo cookbook, Ansible playbook, Puppet module, or Puppet manifest file.<br><br>_**Note:** If Deploy Accelerator is deployed in the offline mode, you must specify the Artifactory URL from where the Chef Solo cookbook, Ansible playbook or Puppet module or manifest file can be downloaded._ |
     | Repository Type    | Select the repository type where the Chef Solo cookbook, Ansible playbook, Puppet module, or Puppet manifest file is located.<br><br>If you have stored the files in a different repository or location (such as Amazon S3), select the **plain** option. |
     | Access Token       | Enter the access token for the repository where the Chef Solo cookbook, Ansible playbook, Puppet module, or Puppet manifest file is located. If you have selected **Artifactory** as the repository type, you must enter the API key.<br><br>Ensure that the access token or API key that you enter is authorized to download the ZIP file from the repository.<br><br>_**Note:** If you do not enter the access token or API key, Deploy Accelerator takes the default access token or API key that your <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'administer', viewSection: 'access-token'})" style="text-decoration:none">your administrator has configured</a>._ |
     | ZIP File Name      | Enter the name of the ZIP file that contains the Chef Solo cookbook, Ansible playbook, Puppet module, or Puppet manifest file. |
     | Unzipped Name      | Enter the name of the Chef Solo cookbook, Ansible playbook, Puppet module, or Puppet manifest file that is extracted from the ZIP file. |
     | Dependent packages | Select the other packages that are a prerequisite for installing this package on a resource. |

   - On the **Attributes** tab, specify the attribute values as the array of JSON. 

     The attributes help to parameterize the Chef Solo cookbook, Ansible playbook, Puppet module, or Puppet manifest file with some dynamic values. All the values that you enter here are shown on the Deploy Accelerator UI to ask the user to provide dynamic values before deployment.

     A few default attributes are shown for your reference. You can choose to use these attributes or replace them with other attributes that are relevant to your package.

     _**Important:** The package will be visible to other users, so ideally you should avoid specifying default values for sensitive attributes._

5. Click **SAVE**.

   Confirm that this package version appears on the Package List page. The state of this package version is unreleased.

   _**Note:** In the case of Chef Solo cookbooks, all recipes that the cookbook contains also become available in Deploy Accelerator. While adding a Chef Solo package (or cookbook) to a compute resource in an environment, users can select multiple recipes in the order in which they must be run on the resource. If no recipe is selected, Deploy Accelerator runs the default recipe defined in the cookbook_

6. <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'package-test'})" style="text-decoration:none">Test the user-defined package</a>.

7. <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'package-release'})" style="text-decoration:none">Release the user-defined package</a>.

#### <a id="package-test" name="package-test"></a>Test a user-defined package

1. <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'environments'})" style="text-decoration:none">Create a test environment</a> of the appropriate environment package type.

   After the environment is created, confirm that the user-defined package that you want to test appears on the **Packages** tab in the left panel.

2. From the **Resources** tab in the left panel, drag a compute resource (For AWS an EC2 instance, or a null VM) to the canvas.

3. From the **Packages** tab in the left panel, drag the user-defined package to this resource.

4. In the right panel that opens, on the **Packages** tab, select the unreleased version that you want to test, and enter other package details as required.

   In case of a Chef Solo package (or cookbook), confirm that all recipes that the cookbook contains are available for selection in the **Recipes** box.

   _**Note:** While adding a Chef Solo package to a compute resource in an environment, users can select multiple recipes in the order in which they must be run on the resource. If no recipe is selected, Deploy Accelerator runs the default recipe defined in the cookbook._

5. Save the environment.

6. <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'deploy'})" style="text-decoration:none">Start a new deployment of the environment</a>.

7. *(Optional)* To resolve any issues that are detected during the testing, edit the user-defined package and then <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'redeploy'})" style="text-decoration:none">redeploy the existing deployment</a>.

After all issues with the user-defined package are successfully resolved, <a href="" ui-sref="rean-platform-docs.accelerator({viewAccelerator: 'rean-deploy', viewPage: 'deploy-and-manage-environments', viewSection: 'package-release'})" style="text-decoration:none">release the user-defined package</a>.

#### <a id="package-release" name="package-release"></a>Release a user-defined package

1. On the Home page, click the **More options** icon (![](/images/rean-platform-common/icon_more.PNG)) in the top-right corner and then click **Packages**.

   Each version of a package is listed separately on the Package List page.

2. To release a package, in the **Actions** column for that package, click **Edit**.

3. On the **Attributes** tab, click **RELEASE**.

   _**Important:** You can neither edit nor delete a released package. In case you need to make any changes, you must create a new package version._

## <a id="package-work" name="package-work"></a>Managing user-defined packages

You can edit, download, or delete user-defined packages only if they are not yet released. 

1. On the Home page, click the **More options** icon (![](/images/rean-platform-common/icon_more.PNG)) in the top-right corner and then click **Packages**.

   Each version of a package is listed separately on the Package List page.

   ![](/images/rean-deploy/rd_packagelist.PNG)

2. In the **Actions** column for a specific version of a user-defined package, perform one of the following actions:

   - To edit a user-defined package, click **Edit** to open the Add Package page, update the package details, and then click **SAVE**.

     You cannot edit a user-defined package that is released.

   - To save a copy of the user-defined package to your computer, click **Download**.

   - To delete the user-defined package, click **Delete** and then click **YES** in the confirmation message box.

## <a id="create-package-version" name="create-package-version"></a>Creating new package versions

You can create new versions of both user-defined and managed packages.

1. On the Home page, click the **More options** icon (![](/images/rean-platform-common/icon_more.PNG)) in the top-right corner and then click **Packages**.

   Each version of a package is listed separately on the Package List page.

2. To create a new version of a package, in the **Actions** column for that package, click **Create New Version**.

3. In the Create New Version From base version window, update details of the new package version.

   By default, details of the base package version are shown.

   _**Note:** You must specify a unique version number for this package. Also, the version that you specify must be greater than the base version that you have selected._

4. Click **CREATE**.

5. _(Optional)_ On the Add Package page, update additional details about the new package version based on your requirements.

6. Click **SAVE**.

   A new version of the package appears on the Package List page.

# <a id="manual" name="manual"></a>Manual changes required for migration of blueprints from 2.28.0 to 3.0.2

In Deploy Accelerator 3.0.2, the Terraform version is upgraded to 0.12.0. Due to this, the blueprints that are created in Deploy Accelerator 2.28.0 and previous releases, require some manual change to be used in 3.0.2. 

#### Mandatory attributes for syntax validation

Terraform v0.11 and earlier allowed adding attribute/sub-attribute JSON as a Input Variable for the resources, which can be added as an interpolation in the resource attribute. 

Terraform v0.12 no longer allows such interpolation for JSON and JSON Array for its attributes or sub-attributes.

If there is an attribute of the type JSON or JSON Array then it should follow a proper structure for its attributes and sub-attributes.

Hence, the **Input/Local** variables of type JSON cannot be used in interpolation to the **Resource** or **Datasource** attributes.

<u>Example</u>

Resource: **aws_route53_record**,  Attribute: **Alias**  

Input Variable for the resource:

```
{
    "var.alias_json" : {
        "type": "map",
        "default": {
		    "name": "dns_record_alias"
        }
    }
}
```

and value for the **alias** attribute in the resource for Terraform v0.11 and previous release:

```
alias : ["${var.alias_json}"]
```

This syntax is above is not valid.

The valid syntax for the **alias** attribute in the **aws_route53_record** resource for Terraform v0.12 is as follows:

```
[
	{
		"evaluate_target_health": "",
		"name": "${var.alias_name}",
		"zone_id": ""
	}
]
```

#### Using Floor function

From Terraform 0.12, the Terraform language does not distinguish between integer and float types. Instead, the language just has a single "number" type that can represent high-precision point numbers. The Terraform documentation mentions that *this new type can represent any value that could be represented before, plus many new values due to the expanded precision.*

The Terraform documentation also mentions that *in most cases this change should not cause any significant behavior change, but please note that in particular the behavior of the division operator is now different: it always performs floating point division, whereas before it would sometimes perform integer division by attempting to infer intent from the argument types.*

*If you are relying on integer division behavior in your configuration, use the `floor` function to obtain the previous result. A common place this would arise is in index operations, where the index is computed by division.*

For example:

```
${floor(length(var.availability_zones)/var.subnet_count)
```

*Unfortunately the automatic upgrade tool cannot apply a fix for this case because it does not have enough information to know if floating point or integer division was intended by the configuration author, so this change must be made manually where needed.*

#### Using Escape Sequences

In JSON attributes, if `\n`, `\r`, `\t`, symbols are not escaped, then Terraform v0.12 does not validate it as a correct JSON. 

<u>JSON format for Terraform v0.11</u>:

```json
{
  "aws_load_balancer_ssl_ports": "${var.cloud_provider == \"aws\" && var.ingress_service_type == \"LoadBalancer\" ? \"service.beta.kubernetes.io/aws-load-balancer-ssl-ports: '443'\n service.beta.kubernetes.io/aws-load-balancer-ssl-negotiation-policy: ELBSecurityPolicy-TLS-1-2-2017-01\" : \"\"}",
  "additional_configs": "${replace(var.additional_configs,\",\", \"\n    \")}",
  "tcp_port_nodeports_mapping": "${replace(var.tcp_port_nodeports_mapping,\",\", \"\n        \")}",
  "tcp_port_service_mapping": "${replace(var.tcp_port_service_mapping,\",\", \"\n  \")}"
}
```

<u>JSON format for Terraform v0.12</u>:

```json
{
  "aws_load_balancer_ssl_ports": "${var.cloud_provider == \"aws\" && var.ingress_service_type == \"LoadBalancer\" ? \"service.beta.kubernetes.io/aws-load-balancer-ssl-ports: '443'\\n service.beta.kubernetes.io/aws-load-balancer-ssl-negotiation-policy: ELBSecurityPolicy-TLS-1-2-2017-01\" : \"\"}",
  "additional_configs": "${replace(var.additional_configs,\",\", \"\\n    \")}",
  "tcp_port_nodeports_mapping": "${replace(var.tcp_port_nodeports_mapping,\",\", \"\\n        \")}",
  "tcp_port_service_mapping": "${replace(var.tcp_port_service_mapping,\",\", \"\\n  \")}"
}
```